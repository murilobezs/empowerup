import{c as H,u as J,a as Q,r as n,j as e,F as G,B as T,L as g,b as K}from"./index-DLqimMV8.js";import{S as W}from"./site-header-CKtPnSCF.js";import{S as X}from"./site-footer-btaBgloE.js";import{I as h}from"./input-FZRWGTRd.js";import{L as c}from"./label-DBxNtR5w.js";import{C as Y}from"./checkbox-BWDr8dGq.js";import{C as Z,b as ee,c as ae,d as se,a as F,e as re}from"./card-CY9-ve7w.js";import{T as oe,a as te,b as ne,c as ie}from"./tabs-CjUoFsGL.js";import{T as ce}from"./textarea-Dc95vB93.js";import{a as le}from"./apiService-D5WPn4Ml.js";import{u as me}from"./useScrollReveal-CkggTsxT.js";import{E as M}from"./eye-CIh_YUdx.js";import"./badge-CME7s750.js";import"./index-EfjSmcDM.js";import"./dropdown-menu-7k7ytBg1.js";import"./index-BgaOpAAA.js";import"./bookmark-B2_N_nt6.js";import"./heart-D1UYKJAB.js";import"./calendar-BcaNxl4E.js";import"./user-BOjY7V17.js";import"./log-out-Cu_b7vs0.js";import"./index-CFq4vo7_.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],q=H("eye-off",de);function Re(){const{register:I}=J(),j=Q(),[o,y]=n.useState({nome:"",username:"",email:"",senha:"",confirmarSenha:"",telefone:"",bio:"",termos:!1}),[R,V]=n.useState(!1),[z,A]=n.useState(""),[f,u]=n.useState(null),[D,x]=n.useState(""),[b,N]=n.useState(!1),[C,S]=n.useState(!1),[t,w]=n.useState({}),k={open:!1,type:"info",title:"",description:"",confirmLabel:"Entendi",onConfirm:null},[d,E]=n.useState(k),i=r=>{E({...k,open:!0,...r})},L=()=>{E(r=>({...r,open:!1,onConfirm:null}))},O=()=>{const r=d.onConfirm;L(),r?.()},B=me({delay:60,stagger:140}),P=r=>{const a=r.replace(/\D/g,"").slice(0,11);let s="";return a.length>0&&(s+="("+a.slice(0,2)),a.length>=3?s+=") "+a.slice(2,7):a.length>2&&(s+=") "+a.slice(2)),a.length>=8&&(s+="-"+a.slice(7,11)),s},l=r=>{const{name:a,value:s,type:m,checked:p}=r.target;let v=m==="checkbox"?p:s;a==="telefone"&&(v=P(v)),y($=>({...$,[a]:v}))},U=async(r,a)=>{if(r.preventDefault(),w({}),o.senha!==o.confirmarSenha){i({type:"error",title:"As senhas nÃ£o coincidem",description:"Verifique os campos de senha e tente novamente.",confirmLabel:"Corrigir"});return}if(!o.termos){i({type:"error",title:"Termos nÃ£o aceitos",description:"VocÃª precisa aceitar os termos de uso e a polÃ­tica de privacidade para continuar.",confirmLabel:"Entendi"});return}try{const s=o.telefone.replace(/\D/g,""),m={nome:o.nome,email:o.email,senha:o.senha,bio:o.bio,tipo:a};o.username.trim()&&(m.username=o.username.trim()),s&&(m.telefone=s);const p=await I(m);p.success?(V(!0),A("Cadastro realizado com sucesso. Enviamos um email com um link de verificaÃ§Ã£o para o seu endereÃ§o â€” por favor, verifique sua caixa de entrada (e spam)."),i({type:"success",title:"Cadastro realizado! ðŸŽ‰",description:"Enviamos um email de verificaÃ§Ã£o. Confirme seu endereÃ§o para acessar a plataforma.",confirmLabel:"Entendi"})):(p.errors&&w(p.errors),i({type:"error",title:"NÃ£o foi possÃ­vel concluir o cadastro",description:p.message||"Revise os dados informados e tente novamente.",confirmLabel:"Tentar novamente"}))}catch(s){console.error("Erro:",s),i({type:"error",title:"Erro inesperado",description:s.message||"NÃ£o foi possÃ­vel conectar com o servidor. Tente novamente em instantes.",confirmLabel:"Fechar"})}};n.useEffect(()=>{const a=new URLSearchParams(window.location.search).get("token");a&&_(a)},[]);const _=async r=>{u("pending"),x("Verificando token...");try{const a=await le.verifyEmail(r);if(a&&a.success){u("success");const s=a.message||"Email verificado com sucesso. Agora vocÃª pode fazer login.";x(s),i({type:"success",title:"Email verificado! âœ…",description:s,confirmLabel:"Ir para login",onConfirm:()=>j("/login")})}else{u("error");const s=a&&a.message||"Token invÃ¡lido ou expirado.";x(s),i({type:"error",title:"Token invÃ¡lido",description:s,confirmLabel:"Fechar"})}}catch(a){u("error");const s=a&&(a.message||a.data&&a.data.message)||"Erro ao verificar token.";x(s),i({type:"error",title:"Erro ao verificar email",description:s,confirmLabel:"Tentar novamente"})}};return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(W,{}),e.jsxs("main",{className:"relative isolate flex-1 flex items-center justify-center overflow-hidden py-12 bg-blush",children:[e.jsx(G,{}),e.jsx("div",{className:"relative z-10 container px-4 md:px-6",children:e.jsxs("div",{ref:B,"data-reveal":!0,className:"mx-auto max-w-md space-y-6",children:[e.jsxs("div",{"data-reveal-child":!0,className:"space-y-2 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Junte-se Ã  EmpowerUp"}),e.jsx("p",{className:"text-gray-700",children:"Crie sua conta e comece a empreender hoje mesmo"})]}),f&&e.jsx("div",{"data-reveal-child":!0,className:`rounded-md p-4 mb-4 ${f==="success"?"bg-green-50 text-green-800":f==="error"?"bg-red-50 text-red-800":"bg-yellow-50 text-yellow-800"}`,children:D}),e.jsxs(oe,{"data-reveal-child":!0,defaultValue:"empreendedora",className:"w-full",children:[e.jsx(te,{className:"grid w-full grid-cols-1",children:e.jsx(ne,{value:"empreendedora",children:"Empreendedora"})}),e.jsx(ie,{value:"empreendedora",children:e.jsxs(Z,{"data-reveal-child":!0,children:[e.jsxs(ee,{children:[e.jsx(ae,{children:"Cadastro de Empreendedora"}),e.jsx(se,{children:"Crie sua conta para vender produtos e conectar-se com outras empreendedoras."})]}),R?e.jsx(F,{children:e.jsxs("div",{className:"space-y-3 text-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Quase lÃ¡ â€” verifique seu email"}),e.jsx("p",{className:"text-sm text-gray-700",children:z}),e.jsx("p",{className:"text-sm text-gray-600",children:"Se nÃ£o recebeu o email, verifique a caixa de spam ou solicite um novo envio na pÃ¡gina de login."}),e.jsx("div",{className:"pt-4",children:e.jsx(T,{onClick:()=>j("/login"),className:"bg-coral",children:"Ir para login"})})]})}):e.jsxs("form",{onSubmit:r=>U(r,"empreendedora"),children:[Object.keys(t).length>0&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-800 p-3 rounded mb-4",children:Object.entries(t).map(([r,a])=>a.map((s,m)=>e.jsx("p",{className:"text-sm",children:s},`${r}-${m}`)))}),e.jsxs(F,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"nome-empreendedora",children:"Nome completo"}),e.jsx(h,{id:"nome-empreendedora",name:"nome",type:"text",placeholder:"Seu nome completo",value:o.nome,onChange:l,required:!0}),t.nome&&e.jsx("p",{className:"text-red-600 text-sm",children:t.nome[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"username-empreendedora",children:"Username (opcional)"}),e.jsx(h,{id:"username-empreendedora",name:"username",type:"text",placeholder:"meuusername (deixe vazio para gerar automaticamente)",value:o.username,onChange:l,maxLength:30}),e.jsx("p",{className:"text-xs text-gray-500",children:"Apenas letras, nÃºmeros, _ ou . (3-30 caracteres)"}),t.username&&e.jsx("p",{className:"text-red-600 text-sm",children:t.username[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"email-empreendedora",children:"Email"}),e.jsx(h,{id:"email-empreendedora",name:"email",type:"email",placeholder:"seu@email.com",value:o.email,onChange:l,required:!0}),t.email&&e.jsx("p",{className:"text-red-600 text-sm",children:t.email[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"telefone-empreendedora",children:"Telefone"}),e.jsx(h,{id:"telefone-empreendedora",name:"telefone",type:"tel",placeholder:"(11) 99999-9999",value:o.telefone,onChange:l,required:!0}),t.telefone&&e.jsx("p",{className:"text-red-600 text-sm",children:t.telefone[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"bio-empreendedora",children:"Sobre vocÃª e seu negÃ³cio"}),e.jsx(ce,{id:"bio-empreendedora",name:"bio",placeholder:"Conte um pouco sobre vocÃª e seus produtos/serviÃ§os...",value:o.bio,onChange:l,rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"senha-empreendedora",children:"Senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"senha-empreendedora",name:"senha",type:b?"text":"password",value:o.senha,onChange:l,className:"pr-10",required:!0}),b?e.jsx(q,{className:"absolute right-3 top-3 h-5 w-5 text-gray-500 cursor-pointer",onClick:()=>N(!1)}):e.jsx(M,{className:"absolute right-3 top-3 h-5 w-5 text-gray-500 cursor-pointer",onClick:()=>N(!0)})]}),t.senha&&e.jsx("p",{className:"text-red-600 text-sm",children:t.senha[0]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(c,{htmlFor:"confirmar-senha-empreendedora",children:"Confirmar senha"}),e.jsxs("div",{className:"relative",children:[e.jsx(h,{id:"confirmar-senha-empreendedora",name:"confirmarSenha",type:C?"text":"password",value:o.confirmarSenha,onChange:l,className:"pr-10",required:!0}),C?e.jsx(q,{className:"absolute right-3 top-3 h-5 w-5 text-gray-500 cursor-pointer",onClick:()=>S(!1)}):e.jsx(M,{className:"absolute right-3 top-3 h-5 w-5 text-gray-500 cursor-pointer",onClick:()=>S(!0)})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Y,{id:"termos-empreendedora",name:"termos",checked:o.termos,onCheckedChange:r=>y(a=>({...a,termos:r}))}),e.jsxs(c,{htmlFor:"termos-empreendedora",className:"text-sm",children:["Aceito os"," ",e.jsx(g,{to:"/termos",className:"text-coral hover:underline",children:"termos de uso"})," ","e"," ",e.jsx(g,{to:"/privacidade",className:"text-coral hover:underline",children:"polÃ­tica de privacidade"})]})]})]}),e.jsxs(re,{className:"flex flex-col space-y-4",children:[e.jsx(T,{type:"submit",className:"w-full bg-coral hover:bg-coral/90",disabled:!o.termos,children:"Criar conta"}),e.jsxs("div",{className:"text-center text-sm",children:["JÃ¡ tem uma conta?"," ",e.jsx(g,{to:"/login",className:"text-coral hover:underline",children:"FaÃ§a login"})]})]})]})]})})]})]})})]}),e.jsx(X,{}),e.jsx(K,{open:d.open,type:d.type,title:d.title,description:d.description,confirmLabel:d.confirmLabel,onConfirm:O,onOpenChange:r=>{r||L()}})]})}export{Re as default};
//# sourceMappingURL=CadastroPage-_PSmOLH3.js.map
