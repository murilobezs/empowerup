import{c as S,k,a as P,r as m,j as e,F as C,B as u,R as f,m as L}from"./index-DLqimMV8.js";import{S as F}from"./site-header-CKtPnSCF.js";import{S as R}from"./site-footer-btaBgloE.js";import{C as z,b as E,c as O,d as A,a as D,e as I}from"./card-CY9-ve7w.js";import{I as g}from"./input-FZRWGTRd.js";import{L as w}from"./label-DBxNtR5w.js";import{S as _}from"./shield-check-pjyo1ri8.js";import"./badge-CME7s750.js";import"./index-EfjSmcDM.js";import"./dropdown-menu-7k7ytBg1.js";import"./index-BgaOpAAA.js";import"./bookmark-B2_N_nt6.js";import"./heart-D1UYKJAB.js";import"./calendar-BcaNxl4E.js";import"./user-BOjY7V17.js";import"./log-out-Cu_b7vs0.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]],M=S("lock-keyhole",q),t=6;function ae(){const[j]=k(),r=j.get("token")||"",x=P(),[s,v]=m.useState({password:"",confirmPassword:""}),[a,n]=m.useState({status:r?"idle":"error",message:r?"":"Link inválido ou incompleto."}),h=m.useMemo(()=>!(!r||a.status==="success"||a.status==="loading"||!s.password||!s.confirmPassword||s.password.length<t||s.password!==s.confirmPassword),[s,a.status,r]),p=l=>{const{name:c,value:d}=l.target;v(y=>({...y,[c]:d}))},N=async l=>{if(l.preventDefault(),!r){n({status:"error",message:"Link inválido. Solicite uma nova recuperação de senha."});return}if(h){n({status:"loading",message:""});try{const d=(await L.resetPassword(r,s.password))?.message||"Sua senha foi atualizada com sucesso!";n({status:"success",message:d})}catch(c){n({status:"error",message:c?.message||"Não foi possível atualizar sua senha agora. Verifique o link ou solicite novamente."})}}},o=a.status==="success",i=a.status==="loading",b=a.status==="error"&&a.message;return e.jsxs("div",{className:"flex min-h-screen flex-col",children:[e.jsx(F,{}),e.jsxs("main",{className:"relative isolate flex flex-1 items-center justify-center overflow-hidden bg-blush py-12",children:[e.jsx(C,{}),e.jsx("div",{className:"relative z-10 w-full max-w-lg px-4 sm:px-6",children:e.jsxs(z,{className:"border-none bg-white/95 shadow-2xl shadow-coral/10 backdrop-blur",children:[e.jsxs(E,{className:"space-y-3 text-center",children:[e.jsx("div",{className:"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-coral/10 text-coral",children:o?e.jsx(_,{className:"h-8 w-8","aria-hidden":"true"}):e.jsx(M,{className:"h-8 w-8","aria-hidden":"true"})}),e.jsx(O,{className:"text-2xl font-bold text-gray-900",children:"Defina sua nova senha"}),e.jsxs(A,{className:"text-base text-muted-foreground",children:["Crie uma senha forte com pelo menos ",t," caracteres para proteger sua conta."]})]}),e.jsxs("form",{onSubmit:N,children:[e.jsxs(D,{className:"space-y-5",children:[b&&e.jsx("div",{className:"rounded-lg bg-red-50 px-4 py-3 text-sm font-medium text-red-600",children:a.message}),o?e.jsx("div",{className:"rounded-2xl bg-emerald-50 px-4 py-4 text-center text-sm text-emerald-700",children:a.message}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2 text-left",children:[e.jsx(w,{htmlFor:"password",children:"Nova senha"}),e.jsx(g,{id:"password",name:"password",type:"password",minLength:t,value:s.password,onChange:p,placeholder:"••••••••",disabled:i||o,required:!0})]}),e.jsxs("div",{className:"space-y-2 text-left",children:[e.jsx(w,{htmlFor:"confirmPassword",children:"Confirmar nova senha"}),e.jsx(g,{id:"confirmPassword",name:"confirmPassword",type:"password",minLength:t,value:s.confirmPassword,onChange:p,placeholder:"Repita a senha",disabled:i||o,required:!0})]}),s.password&&s.password.length<t&&e.jsxs("p",{className:"text-xs text-red-600",children:["A senha deve ter pelo menos ",t," caracteres."]}),s.confirmPassword&&s.password!==s.confirmPassword&&e.jsx("p",{className:"text-xs text-red-600",children:"As senhas não coincidem."}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lembre-se de guardar sua nova senha em um local seguro. Evite reutilizar senhas de outros serviços."})]})]}),e.jsxs(I,{className:"flex flex-col gap-3",children:[o?e.jsx(u,{type:"button",className:"w-full bg-coral text-white hover:bg-coral/90",onClick:()=>x(f.LOGIN),children:"Fazer login"}):e.jsx(u,{type:"submit",className:"w-full bg-coral text-white hover:bg-coral/90",disabled:!h||i,children:i?"Salvando nova senha...":"Atualizar senha"}),e.jsx(u,{type:"button",variant:"link",className:"text-coral hover:text-coral/80",onClick:()=>x(f.FORGOT_PASSWORD),children:"Voltar para recuperar senha"})]})]})]})})]}),e.jsx(R,{})]})}export{ae as default};
//# sourceMappingURL=ResetPasswordPage-BYkO7yAm.js.map
