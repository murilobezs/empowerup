{"version":3,"file":"ResetPasswordPage-BYkO7yAm.js","sources":["../../node_modules/lucide-react/dist/esm/icons/lock-keyhole.js","../../src/pages/ResetPasswordPage.jsx"],"sourcesContent":["/**\n * @license lucide-react v0.522.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"16\", r: \"1\", key: \"1au0dj\" }],\n  [\"rect\", { x: \"3\", y: \"10\", width: \"18\", height: \"12\", rx: \"2\", key: \"6s8ecr\" }],\n  [\"path\", { d: \"M7 10V7a5 5 0 0 1 10 0v3\", key: \"1pqi11\" }]\n];\nconst LockKeyhole = createLucideIcon(\"lock-keyhole\", __iconNode);\n\nexport { __iconNode, LockKeyhole as default };\n//# sourceMappingURL=lock-keyhole.js.map\n","import { useMemo, useState } from \"react\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport { LockKeyhole, ShieldCheck } from \"lucide-react\";\r\nimport { SiteHeader } from \"../components/site-header\";\r\nimport { SiteFooter } from \"../components/site-footer\";\r\nimport { FloatingPlusBackdrop } from \"../components/common\";\r\nimport { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from \"../components/ui/card\";\r\nimport { Input } from \"../components/ui/input\";\r\nimport { Label } from \"../components/ui/label\";\r\nimport { Button } from \"../components/ui/button\";\r\nimport apiService from \"../services/api\";\r\nimport { ROUTES } from \"../constants\";\r\n\r\nconst MIN_PASSWORD_LENGTH = 6;\r\n\r\nexport default function ResetPasswordPage() {\r\n  const [searchParams] = useSearchParams();\r\n  const token = searchParams.get(\"token\") || \"\";\r\n  const navigate = useNavigate();\r\n\r\n  const [form, setForm] = useState({ password: \"\", confirmPassword: \"\" });\r\n  const [state, setState] = useState({ status: token ? \"idle\" : \"error\", message: token ? \"\" : \"Link inválido ou incompleto.\" });\r\n\r\n  const canSubmit = useMemo(() => {\r\n    if (!token) return false;\r\n    if (state.status === \"success\" || state.status === \"loading\") return false;\r\n    if (!form.password || !form.confirmPassword) return false;\r\n    if (form.password.length < MIN_PASSWORD_LENGTH) return false;\r\n    if (form.password !== form.confirmPassword) return false;\r\n    return true;\r\n  }, [form, state.status, token]);\r\n\r\n  const handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n    setForm((prev) => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    if (!token) {\r\n      setState({ status: \"error\", message: \"Link inválido. Solicite uma nova recuperação de senha.\" });\r\n      return;\r\n    }\r\n    if (!canSubmit) return;\r\n\r\n    setState({ status: \"loading\", message: \"\" });\r\n\r\n    try {\r\n      const response = await apiService.resetPassword(token, form.password);\r\n      const successMessage = response?.message || \"Sua senha foi atualizada com sucesso!\";\r\n      setState({ status: \"success\", message: successMessage });\r\n    } catch (error) {\r\n      setState({\r\n        status: \"error\",\r\n        message: error?.message || \"Não foi possível atualizar sua senha agora. Verifique o link ou solicite novamente.\",\r\n      });\r\n    }\r\n  };\r\n\r\n  const isSuccess = state.status === \"success\";\r\n  const isLoading = state.status === \"loading\";\r\n  const isError = state.status === \"error\" && state.message;\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen flex-col\">\r\n      <SiteHeader />\r\n      <main className=\"relative isolate flex flex-1 items-center justify-center overflow-hidden bg-blush py-12\">\r\n        <FloatingPlusBackdrop />\r\n        <div className=\"relative z-10 w-full max-w-lg px-4 sm:px-6\">\r\n          <Card className=\"border-none bg-white/95 shadow-2xl shadow-coral/10 backdrop-blur\">\r\n            <CardHeader className=\"space-y-3 text-center\">\r\n              <div className=\"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-coral/10 text-coral\">\r\n                {isSuccess ? (\r\n                  <ShieldCheck className=\"h-8 w-8\" aria-hidden=\"true\" />\r\n                ) : (\r\n                  <LockKeyhole className=\"h-8 w-8\" aria-hidden=\"true\" />\r\n                )}\r\n              </div>\r\n              <CardTitle className=\"text-2xl font-bold text-gray-900\">\r\n                Defina sua nova senha\r\n              </CardTitle>\r\n              <CardDescription className=\"text-base text-muted-foreground\">\r\n                Crie uma senha forte com pelo menos {MIN_PASSWORD_LENGTH} caracteres para proteger sua conta.\r\n              </CardDescription>\r\n            </CardHeader>\r\n            <form onSubmit={handleSubmit}>\r\n              <CardContent className=\"space-y-5\">\r\n                {isError && (\r\n                  <div className=\"rounded-lg bg-red-50 px-4 py-3 text-sm font-medium text-red-600\">\r\n                    {state.message}\r\n                  </div>\r\n                )}\r\n\r\n                {isSuccess ? (\r\n                  <div className=\"rounded-2xl bg-emerald-50 px-4 py-4 text-center text-sm text-emerald-700\">\r\n                    {state.message}\r\n                  </div>\r\n                ) : (\r\n                  <>\r\n                    <div className=\"space-y-2 text-left\">\r\n                      <Label htmlFor=\"password\">Nova senha</Label>\r\n                      <Input\r\n                        id=\"password\"\r\n                        name=\"password\"\r\n                        type=\"password\"\r\n                        minLength={MIN_PASSWORD_LENGTH}\r\n                        value={form.password}\r\n                        onChange={handleChange}\r\n                        placeholder=\"••••••••\"\r\n                        disabled={isLoading || isSuccess}\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div className=\"space-y-2 text-left\">\r\n                      <Label htmlFor=\"confirmPassword\">Confirmar nova senha</Label>\r\n                      <Input\r\n                        id=\"confirmPassword\"\r\n                        name=\"confirmPassword\"\r\n                        type=\"password\"\r\n                        minLength={MIN_PASSWORD_LENGTH}\r\n                        value={form.confirmPassword}\r\n                        onChange={handleChange}\r\n                        placeholder=\"Repita a senha\"\r\n                        disabled={isLoading || isSuccess}\r\n                        required\r\n                      />\r\n                    </div>\r\n                    {form.password && form.password.length < MIN_PASSWORD_LENGTH && (\r\n                      <p className=\"text-xs text-red-600\">\r\n                        A senha deve ter pelo menos {MIN_PASSWORD_LENGTH} caracteres.\r\n                      </p>\r\n                    )}\r\n                    {form.confirmPassword && form.password !== form.confirmPassword && (\r\n                      <p className=\"text-xs text-red-600\">\r\n                        As senhas não coincidem.\r\n                      </p>\r\n                    )}\r\n                    <p className=\"text-xs text-muted-foreground\">\r\n                      Lembre-se de guardar sua nova senha em um local seguro. Evite reutilizar senhas de outros serviços.\r\n                    </p>\r\n                  </>\r\n                )}\r\n              </CardContent>\r\n              <CardFooter className=\"flex flex-col gap-3\">\r\n                {isSuccess ? (\r\n                  <Button\r\n                    type=\"button\"\r\n                    className=\"w-full bg-coral text-white hover:bg-coral/90\"\r\n                    onClick={() => navigate(ROUTES.LOGIN)}\r\n                  >\r\n                    Fazer login\r\n                  </Button>\r\n                ) : (\r\n                  <Button\r\n                    type=\"submit\"\r\n                    className=\"w-full bg-coral text-white hover:bg-coral/90\"\r\n                    disabled={!canSubmit || isLoading}\r\n                  >\r\n                    {isLoading ? \"Salvando nova senha...\" : \"Atualizar senha\"}\r\n                  </Button>\r\n                )}\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"link\"\r\n                  className=\"text-coral hover:text-coral/80\"\r\n                  onClick={() => navigate(ROUTES.FORGOT_PASSWORD)}\r\n                >\r\n                  Voltar para recuperar senha\r\n                </Button>\r\n              </CardFooter>\r\n            </form>\r\n          </Card>\r\n        </div>\r\n      </main>\r\n      <SiteFooter />\r\n    </div>\r\n  );\r\n}\r\n"],"names":["__iconNode","LockKeyhole","createLucideIcon","MIN_PASSWORD_LENGTH","ResetPasswordPage","searchParams","useSearchParams","token","navigate","useNavigate","form","setForm","useState","state","setState","canSubmit","useMemo","handleChange","event","name","value","prev","handleSubmit","successMessage","apiService","error","isSuccess","isLoading","isError","jsxs","jsx","SiteHeader","FloatingPlusBackdrop","Card","CardHeader","ShieldCheck","CardTitle","CardDescription","CardContent","Fragment","Label","Input","CardFooter","Button","ROUTES","SiteFooter"],"mappings":"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","x_google_ignoreList":[0]}