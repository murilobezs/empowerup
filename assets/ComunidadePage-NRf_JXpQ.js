import{c as is,r as t,n as P,j as e,X as Q,B as N,i as cs,L as _,u as ls,a as ms,o as ds,k as us,m as H,p as hs,D as be,q as ve,s as Ne,t as we,v as ye,M as re}from"./index-DLqimMV8.js";import{T as ps,a as xs,b as oe,c as J}from"./tabs-CjUoFsGL.js";import{C as w,b as I,c as R,a as y}from"./card-CY9-ve7w.js";import{I as gs}from"./input-FZRWGTRd.js";import{A as fs,a as js,E as Ce}from"./EmpowerUpCreatePost-_RHOb7Hi.js";import{L as Se}from"./loader-circle-ClwSyFO1.js";import{C as bs,U as $}from"./index-EfjSmcDM.js";import{u as vs}from"./toast-7vBxPuBc.js";import{E as Ns,S as ws}from"./EditPostModal-FMrAoioO.js";import{M as ke,S as ys,g as Cs,a as Ss,b as ks,n as Es,U as Ee,c as Ps}from"./site-header-CKtPnSCF.js";import{C as As}from"./CommunityLeftSidebar-CgYDUEfw.js";import{S as Ts}from"./SearchComponent-CihMYpLm.js";import{T as Pe}from"./trending-up-D6ou80w9.js";import{H as Ae}from"./hash-CzDnjanY.js";import{C as ne}from"./calendar-BcaNxl4E.js";import{M as _s}from"./map-pin-XNZDTA2K.js";import{C as Le}from"./dropdown-menu-7k7ytBg1.js";import{S as Us,a as Ls,b as Ms,c as zs,d as Ds}from"./select-d49l-vTK.js";import{S as Te,f as Bs}from"./index-BgaOpAAA.js";import{A as Fs}from"./award-CNN5yJ-Z.js";import{C as Is}from"./circle-check-big-B0wfPxzh.js";import{B as _e,a as Rs,b as $s}from"./bookmark-B2_N_nt6.js";import{F as Os}from"./funnel-BHegw_va.js";import{H as qs}from"./heart-D1UYKJAB.js";import"./textarea-Dc95vB93.js";import"./tag-6iqodST4.js";import"./video-BK-m8ucD.js";import"./chart-column-D_csKldJ.js";import"./send-COm1LQ5b.js";import"./circle-alert-Bp1UBQ88.js";import"./badge-CME7s750.js";import"./square-pen-CjVE55qt.js";import"./trash-2-CP23ljvT.js";import"./label-DBxNtR5w.js";import"./user-BOjY7V17.js";import"./log-out-Cu_b7vs0.js";import"./crown-BrBsF1Iu.js";import"./rocket-oRE_XYSN.js";import"./mail-D_LXhG2r.js";import"./index-CFq4vo7_.js";import"./chevron-up-DKadsFnq.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]],Gs=is("graduation-cap",Vs);function Hs({user:d,onUsernameSet:c}){const[x,C]=t.useState(""),[A,b]=t.useState(!1),[j,f]=t.useState(null),[l,S]=t.useState(""),[v,O]=t.useState(!1),M=t.useCallback(async()=>{try{const p=await(await fetch(P.getApiUrl(`username.php?action=generate_username&nome=${encodeURIComponent(d.nome)}&email=${encodeURIComponent(d.email)}`))).json();p.success&&(C(p.username),z(p.username))}catch(g){console.error("Erro ao gerar sugestÃ£o:",g)}},[d.nome,d.email]);t.useEffect(()=>{d?.nome&&M()},[d,M]);const z=async g=>{if(!g||g.length<3){f(null),S("");return}b(!0);try{const F=await(await fetch(P.getApiUrl(`username.php?action=check_username&username=${encodeURIComponent(g)}`))).json();f(F.available),S(F.message)}catch(p){console.error("Erro ao verificar username:",p),f(!1),S("Erro ao verificar disponibilidade")}b(!1)},D=g=>{const p=g.target.value.toLowerCase().replace(/[^a-z0-9_]/g,"");C(p),clearTimeout(window.usernameTimeout),window.usernameTimeout=setTimeout(()=>{z(p)},500)},B=async()=>{if(!(!j||!x)){O(!0);try{const p=await(await fetch(P.getApiUrl("username.php"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"set_username",user_id:d.id,username:x})})).json();p.success?c(x):(S(p.message),f(!1))}catch(g){console.error("Erro ao salvar username:",g),S("Erro ao salvar username")}O(!1)}};return e.jsxs(w,{className:"w-full max-w-md mx-auto",children:[e.jsxs(I,{children:[e.jsx(R,{className:"text-center",children:"Escolha seu username"}),e.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["Seu username serÃ¡ usado para identificar seus posts, como @",x||"seu_username"]})]}),e.jsxs(y,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Username"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"@"}),e.jsx(gs,{type:"text",value:x,onChange:D,placeholder:"seu_username",className:"pl-8",maxLength:20}),A&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(Se,{className:"h-4 w-4 animate-spin text-gray-400"})}),!A&&j===!0&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(bs,{className:"h-4 w-4 text-green-500"})}),!A&&j===!1&&x.length>=3&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx(Q,{className:"h-4 w-4 text-red-500"})})]}),l&&e.jsx(fs,{className:j?"border-green-200 bg-green-50":"border-red-200 bg-red-50",children:e.jsx(js,{className:j?"text-green-700":"text-red-700",children:l})}),e.jsx("div",{className:"text-xs text-gray-500",children:"Use apenas letras, nÃºmeros e underscore (_). 3-20 caracteres."})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(N,{variant:"outline",onClick:M,className:"flex-1",children:"Nova sugestÃ£o"}),e.jsx(N,{onClick:B,disabled:!j||v,className:"flex-1 bg-coral hover:bg-coral/90",children:v?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-4 w-4 mr-2 animate-spin"}),"Salvando..."]}):"Confirmar"})]})]})]})}function Js({trending:d=[],events:c=[],groups:x=[],className:C,showSearch:A=!0}){const b=t.useMemo(()=>d.slice(0,5),[d]),j=t.useMemo(()=>c.slice(0,3),[c]),f=t.useMemo(()=>x.slice(0,4),[x]);return e.jsxs("aside",{className:cs("hidden lg:block lg:col-span-3 space-y-4 lg:space-y-6",C),children:[A&&e.jsx(Ts,{}),e.jsxs(w,{className:"shadow-sm border-0 bg-white/80 backdrop-blur-sm",children:[e.jsx(I,{className:"pb-2 sm:pb-3",children:e.jsxs(R,{className:"text-base sm:text-lg flex items-center font-bold",children:[e.jsx(Pe,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 text-coral"}),"Trending"]})}),e.jsx(y,{className:"pt-0",children:e.jsx("div",{className:"space-y-2 sm:space-y-3",children:b.length>0?b.map((l,S)=>e.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 min-w-0",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-coral/10 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(Ae,{className:"h-3 w-3 sm:h-5 sm:w-5 text-coral"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"font-semibold text-xs sm:text-sm truncate",children:["#",l.tag??l.nome??"tendencia"]}),l.count&&e.jsxs("div",{className:"text-xs text-gray-500",children:[l.count," posts"]})]})]}),e.jsx(Pe,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400 flex-shrink-0"})]},l.id??S)):e.jsxs("div",{className:"text-center text-gray-500 py-4",children:[e.jsx(Ae,{className:"h-6 w-6 sm:h-8 sm:w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"text-xs sm:text-sm",children:"Nenhuma hashtag em alta ainda"})]})})})]}),e.jsxs(w,{className:"shadow-sm border-0 bg-white/80 backdrop-blur-sm",children:[e.jsx(I,{className:"pb-2 sm:pb-3",children:e.jsxs(R,{className:"text-base sm:text-lg flex items-center font-bold",children:[e.jsx(ne,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 text-coral"}),"PrÃ³ximos Eventos"]})}),e.jsxs(y,{className:"pt-0",children:[e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[j.map(l=>e.jsxs("div",{className:"border-l-4 border-coral pl-3 hover:bg-gray-50 rounded-r-lg transition-colors",children:[e.jsx("h4",{className:"font-semibold text-xs sm:text-sm",children:l.titulo??l.nome}),l.data_evento&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[e.jsx(ne,{className:"h-3 w-3 mr-1"}),new Date(l.data_evento).toLocaleDateString("pt-BR")]}),l.localizacao&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[e.jsx(_s,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"truncate",children:l.localizacao})]})]},l.id)),j.length===0&&e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center py-4",children:"Nenhum evento programado"})]}),e.jsx("div",{className:"mt-3 text-right",children:e.jsx(_,{to:"/eventos",className:"text-xs font-semibold text-coral hover:underline",children:"Abrir agenda completa"})})]})]}),e.jsxs(w,{className:"shadow-sm border-0 bg-white/80 backdrop-blur-sm",children:[e.jsx(I,{className:"pb-2 sm:pb-3",children:e.jsxs(R,{className:"text-base sm:text-lg flex items-center font-bold",children:[e.jsx($,{className:"h-4 w-4 sm:h-5 sm:w-5 mr-2 text-olive"}),"Grupos Ativos"]})}),e.jsxs(y,{className:"pt-0",children:[e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[f.map(l=>e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-3 p-2 hover:bg-gray-50 rounded-lg cursor-pointer transition-colors",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-olive/10 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx($,{className:"h-3 w-3 sm:h-5 sm:w-5 text-olive"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"font-semibold text-xs sm:text-sm truncate",children:l.nome}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l.membros_count||0," membros"]})]}),e.jsx(Le,{className:"h-3 w-3 sm:h-4 sm:w-4 text-gray-400 flex-shrink-0"})]},l.id)),f.length===0&&e.jsx("p",{className:"text-xs sm:text-sm text-gray-500 text-center py-4",children:"Nenhum grupo ativo"})]}),e.jsx("div",{className:"mt-3 text-right",children:e.jsx(_,{to:"/grupos",className:"text-xs font-semibold text-olive hover:underline",children:"Ver todos os grupos"})})]})]})]})}const Ue=["posts","seguindo","grupos","notificacoes"],Qs=(d={})=>{const c=d?.isFollowed??d?.autor_seguido??d?.autorSeguido??d?.following??d?.seguindo;if(typeof c=="boolean")return c;if(typeof c=="number")return Number(c)>0;if(typeof c=="string"){const x=c.trim().toLowerCase();return x==="1"||x==="true"||x==="sim"}return!1};function Da(){const[d,c]=t.useState([]),[x,C]=t.useState([]),[A,b]=t.useState([]),[j,f]=t.useState([]),[l,S]=t.useState([]),[v,O]=t.useState("todos"),[M,z]=t.useState(!0),[D,B]=t.useState(!0),[g,p]=t.useState(!1),[F,W]=t.useState({visible:!1,message:""}),[Me,ie]=t.useState(null),[ze,ce]=t.useState(!1),[q,V]=t.useState(!1),{user:n,updateUser:De}=ls(),{addToast:u}=vs(),K=ms(),X=t.useMemo(()=>n?.id?`empowerup_banner_hidden_${n.id}`:"empowerup_banner_hidden",[n?.id]),{notifications:le,unreadCount:Be,markAsRead:Fe,markAllAsRead:Ie,refresh:Y}=ds(),[k,Z]=us(),[U,me]=t.useState(()=>{const s=k.get("tab");return s&&Ue.includes(s)?s:"posts"}),T=t.useRef(null),L=t.useCallback(()=>{if(!k.get("compose"))return;const a=new URLSearchParams(k);a.delete("compose"),Z(a,{replace:!0})},[k,Z]),de=t.useCallback(()=>{V(!1),L()},[L]),ue=t.useCallback(async()=>{try{const s=await H.listGroups({limit:12});s?.success?C(s.groups||s.grupos||[]):C([])}catch(s){console.error("Erro ao carregar grupos:",s),C([])}},[C,n?.id]),he=t.useCallback(async()=>{try{const s=await H.getEvents({status:"ativo",futuro:"true",limit:12});s?.success?f(s.events||s.eventos||[]):f([])}catch(s){console.error("Erro ao carregar eventos:",s),f([])}},[f,n?.id]);t.useEffect(()=>{const s=k.get("tab");if(s==="grupos"){K("/grupos",{replace:!0});return}if(s==="eventos"){K("/eventos",{replace:!0});return}const a=s&&Ue.includes(s)?s:"posts";a!==U&&me(a)},[k,U,K]),t.useEffect(()=>{if(k.get("compose")==="1"){if(!n){u("FaÃ§a login para criar um post","warning"),L();return}V(!0)}},[k,n,u,L]),t.useEffect(()=>{q||L()},[q,L]),t.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.getItem(X)==="1"?(B(!1),p(!1)):B(!0)}catch(s){console.warn("NÃ£o foi possÃ­vel verificar o estado do banner:",s)}},[X]),t.useEffect(()=>{if(D){const s=setTimeout(()=>p(!0),50);return()=>clearTimeout(s)}},[D]);const pe=()=>{if(typeof document<"u"){const s=document.activeElement;s&&typeof s.blur=="function"&&s.blur()}if(p(!1),setTimeout(()=>B(!1),220),typeof window<"u")try{window.localStorage.setItem(X,"1")}catch(s){console.warn("NÃ£o foi possÃ­vel salvar preferÃªncia do banner:",s)}},Re=s=>{me(s);const a=new URLSearchParams(k);s==="posts"?a.delete("tab"):a.set("tab",s),Z(a,{replace:!0})};t.useEffect(()=>{U==="notificacoes"&&Y()},[U,Y]),t.useEffect(()=>{const s=()=>{V(!0)};return window.addEventListener("openCreatePost",s),()=>window.removeEventListener("openCreatePost",s)},[]),t.useEffect(()=>{const s=async()=>{try{const o=await H.getPosts();o.success&&Array.isArray(o.posts)?c(o.posts):c([])}catch(o){console.error("Erro ao carregar posts:",o)}},a=async()=>{try{const o=await fetch(`${P.API_BASE_URL}/trending/`);if(o.ok){const E=await o.json();S(E.trending||[])}}catch(o){console.error("Erro ao carregar trending:",o)}},r=async()=>{if(!n){b([]);return}try{const o=await H.getMyGroupsPosts();o.success&&Array.isArray(o.posts)?b(o.posts):b([])}catch(o){console.error("Erro ao carregar posts dos grupos:",o),b([])}};let i=!0;const m=2300;return(async()=>{z(!0);const o=()=>typeof performance<"u"&&performance.now?performance.now():Date.now(),E=o();try{await Promise.allSettled([s(),ue(),he(),a(),r()])}catch(te){console.error("Erro ao carregar dados da comunidade:",te)}const ns=o()-E,je=m-ns;je>0&&await new Promise(te=>setTimeout(te,je)),i&&z(!1)})(),()=>{i=!1}},[n,ue,he]);const[xe,ee]=t.useState(!1);t.useEffect(()=>{n&&!n.username&&ee(!0)},[n]);const ge=async(s,a)=>{try{if(!n?.id)return u("VocÃª precisa estar logada para postar","error"),{success:!1,message:"UsuÃ¡ria nÃ£o logada"};const r=new FormData;r.append("conteudo",s.conteudo),r.append("categoria",s.categoria),r.append("tags",JSON.stringify(s.tags)),a&&(a.type.startsWith("image/")?r.append("image",a):a.type.startsWith("video/")&&r.append("video",a));const i=JSON.parse(localStorage.getItem("empowerup_user")||"{}"),h=await(await fetch(`${P.API_BASE_URL}/posts`,{method:"POST",headers:{Authorization:i.token?`Bearer ${i.token}`:""},body:r})).json();return h.success?(c(o=>[h.post,...o]),W({visible:!0,message:"Post realizado com sucesso"}),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>W({visible:!1,message:""}),4e3),q&&de(),{success:!0,post:h.post}):(u("Erro ao criar post: "+h.message,"error"),{success:!1,message:h.message})}catch(r){return console.error("Erro ao criar post:",r),u("Erro ao publicar post: "+r.message,"error"),{success:!1,message:r.message}}};t.useEffect(()=>()=>{T.current&&clearTimeout(T.current)},[]);const $e=async s=>{if(window.confirm("Tem certeza que deseja deletar este post?"))try{if((await fetch(`${P.API_BASE_URL}/posts/postagens.php?id=${s}`,{method:"DELETE"})).ok)c(r=>r.filter(i=>i.id!==s)),u("Post deletado com sucesso! âœ…","success");else throw new Error("Erro ao deletar post")}catch(a){console.error("Erro ao deletar post:",a),u("Erro ao deletar post","error")}},Oe=async(s,a,r)=>{if(!n){u("FaÃ§a login para curtir posts","warning");return}c(i=>i.map(m=>m.id===s?{...m,likes:r,user_liked:a,isLiked:a}:m)),u(a?"Post curtido! â¤ï¸":"Like removido","success")},qe=async(s,a)=>{if(!n){u("FaÃ§a login para salvar posts","warning");return}c(r=>r.map(i=>i.id===s?{...i,user_saved:a,isSaved:a}:i)),u(a?"Post salvo!":"Post removido dos salvos","success")},Ve=async(s,a,r)=>{if(!n){u("FaÃ§a login para seguir usuÃ¡rios","warning");return}c(i=>i.map(m=>m.user_id===s?{...m,isFollowed:a,followers_count:r}:m)),u(a?"Agora vocÃª estÃ¡ seguindo este usuÃ¡rio!":"VocÃª parou de seguir este usuÃ¡rio","success")},Ge=async(s,a,r=null)=>{if(!n){u("FaÃ§a login para comentar","warning");return}if(!a||typeof a=="object"&&!Array.isArray(a)){c(m=>m.map(h=>h.id===s?{...h,comentarios:(h.comentarios||0)+1}:h)),u("ComentÃ¡rio adicionado! ðŸ’¬","success");return}const i=typeof a=="string"?a:"";if(!i.trim()){u("Digite um comentÃ¡rio antes de enviar.","warning");return}try{(await(await fetch(`${P.API_BASE_URL}/comments/posts/${s}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.token}`},body:JSON.stringify({conteudo:i,parent_id:r})})).json()).success&&(u("ComentÃ¡rio adicionado! ðŸ’¬","success"),c(o=>o.map(E=>E.id===s?{...E,comentarios:(E.comentarios||0)+1}:E)))}catch(m){console.error("Erro ao comentar:",m),u("Erro ao adicionar comentÃ¡rio","error")}},He=async s=>{try{navigator.share?await navigator.share({title:"EmpowerUp - Comunidade",text:"Confira este post incrÃ­vel!",url:window.location.href}):(await navigator.clipboard.writeText(window.location.href),u("Link copiado para a Ã¡rea de transferÃªncia! ðŸ“‹","success"))}catch(a){console.error("Erro ao compartilhar:",a)}},Je=s=>{ie(s),ce(!0)},Qe=async(s,a)=>{try{const i=await(await fetch(`${P.API_BASE_URL}/posts/${s}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n.token}`},body:JSON.stringify(a)})).json();if(i.success)c(m=>m.map(h=>h.id===s?{...h,...i.post}:h)),u("Post atualizado com sucesso!","success");else throw new Error(i.message||"Erro ao atualizar post")}catch(r){throw console.error("Erro ao atualizar post:",r),u("Erro ao atualizar post. Tente novamente.","error"),r}},G=t.useCallback(s=>s?v==="todos"?!0:(s.categoria||s.category||"").toLowerCase()===v.toLowerCase():!1,[v]),We=t.useMemo(()=>d.filter(G),[d,G]),Ke=t.useMemo(()=>d.filter(s=>Qs(s)&&G(s)),[d,G]),Xe=[{label:"Todos",value:"todos"},{label:"Artesanato",value:"artesanato"},{label:"CulinÃ¡ria",value:"culinaria"},{label:"Moda",value:"moda"},{label:"Beleza",value:"beleza"},{label:"Tecnologia",value:"tecnologia"},{label:"NegÃ³cios",value:"negocios"},{label:"SaÃºde",value:"saude"},{label:"EducaÃ§Ã£o",value:"educacao"}],se=()=>e.jsx("div",{className:"mb-3 sm:mb-4",children:e.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm font-semibold text-gray-700",children:[e.jsx(Os,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{children:"Filtrar por categoria"})]}),e.jsx("div",{className:"w-full sm:w-64",children:e.jsxs(Us,{value:v,onValueChange:O,children:[e.jsx(Ls,{className:"w-full border-sage/30 focus:border-coral focus:ring-coral/40",children:e.jsx(Ms,{placeholder:"Selecione uma categoria"})}),e.jsx(zs,{className:"max-h-64",children:Xe.map(s=>e.jsx(Ds,{value:s.value,children:s.label},s.value))})]})})]})}),ae=(s,a={})=>{const{icon:r=re,title:i="Nenhum post encontrado",description:m="Seja a primeira a compartilhar algo inspirador!",action:h=null}=a;return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[s.map(o=>e.jsx(ws,{post:o,currentUser:n,onLike:Oe,onComment:Ge,onShare:He,onDelete:$e,onUpdate:Je,onSave:qe,onFollow:Ve,showSaveButton:!0,isSaved:o.user_saved||o.isSaved||!1,showGroupBadge:!!o.grupo_nome,groupName:o.grupo_nome},o.id)),s.length===0&&e.jsx(w,{className:"shadow-sm",children:e.jsxs(y,{className:"p-8 sm:p-12 text-center",children:[r&&e.jsx(r,{className:"mx-auto mb-3 h-10 w-10 text-gray-400 sm:mb-4 sm:h-12 sm:w-12"}),e.jsx("h3",{className:"mb-2 text-base font-semibold text-gray-900 sm:text-lg",children:i}),e.jsx("p",{className:"text-sm text-gray-500",children:m}),h&&e.jsx("div",{className:"mt-4 flex justify-center",children:h})]})})]})},Ye=()=>n?e.jsx("div",{className:"hidden md:block",children:e.jsx(Ce,{user:n,onPostCreated:ge,className:"mb-4 sm:mb-6"})}):e.jsx(w,{className:"shadow-sm",children:e.jsxs(y,{className:"p-4 text-center sm:p-6",children:[e.jsx("p",{className:"mb-4 text-gray-600",children:"FaÃ§a login para participar da comunidade"}),e.jsx(N,{className:"bg-coral hover:bg-coral/90",children:"Fazer Login"})]})}),Ze=[{id:"groups",to:"/grupos",title:"Comunidade em grupos",description:"Acesse os grupos temÃ¡ticos completos para interagir com outras empreendedoras.",icon:$,accent:"bg-emerald-100 text-emerald-600",cta:"Ir para grupos"},{id:"events",to:"/eventos",title:"Agenda de eventos",description:"Confira workshops, mentorias e encontros presenciais ou online.",icon:ne,accent:"bg-violet-100 text-violet-600",cta:"Ver agenda completa"},{id:"courses",to:"/cursos",title:"Cursos EmpowerUp",description:"Domine novas habilidades com conteÃºdos feitos para microempreendedoras.",icon:Gs,accent:"bg-sky-100 text-sky-600",cta:"ComeÃ§ar agora"},{id:"plans",to:"/planos",title:"Planos e Assinaturas",description:"Desbloqueie benefÃ­cios exclusivos, mentorias e ferramentas premium.",icon:Fs,accent:"bg-amber-100 text-amber-600",cta:"Ver benefÃ­cios"},{id:"campaigns",to:"/campanhas",title:"Campanhas de AnÃºncios",description:"Impulsione seu negÃ³cio e alcance novas clientes com campanhas guiadas.",icon:ke,accent:"bg-rose-100 text-rose-600",cta:"Criar campanha"}],[es,ss]=t.useState([]);t.useEffect(()=>{typeof window>"u"||window.localStorage.removeItem("empowerup_hidden_quick_links")},[]);const fe=Ze.filter(s=>!es.includes(s.id)),as=(s,a)=>{s.preventDefault(),s.stopPropagation(),ss(r=>r.includes(a)?r:[...r,a])},ts=s=>{switch(Es(s)){case"like":return e.jsx("div",{className:"w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(qs,{className:"h-5 w-5 text-red-500"})});case"comment":return e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(re,{className:"h-5 w-5 text-blue-500"})});case"follow":return e.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-full flex items-center justify-center",children:e.jsx(Ee,{className:"h-5 w-5 text-emerald-500"})});case"save":return e.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx($s,{className:"h-5 w-5 text-purple-500"})});case"message":return e.jsx("div",{className:"w-10 h-10 bg-sky-100 rounded-full flex items-center justify-center",children:e.jsx(re,{className:"h-5 w-5 text-sky-500"})});case"group":return e.jsx("div",{className:"w-10 h-10 bg-amber-100 rounded-full flex items-center justify-center",children:e.jsx($,{className:"h-5 w-5 text-amber-500"})});case"course":return e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-full flex items-center justify-center",children:e.jsx(Rs,{className:"h-5 w-5 text-indigo-500"})});case"system":return e.jsx("div",{className:"w-10 h-10 bg-rose-100 rounded-full flex items-center justify-center",children:e.jsx(Te,{className:"h-5 w-5 text-rose-500"})});case"campaign":return e.jsx("div",{className:"w-10 h-10 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(ke,{className:"h-5 w-5 text-orange-500"})});default:return e.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(_e,{className:"h-5 w-5 text-gray-500"})})}},rs=async s=>{if(!s?.id)return;s.is_read||await Fe(s.id);const a=Ps(s);a&&(window.location.href=a)},os=async()=>{await Ie()&&Y()};return M?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gradient-to-b from-coral/5 to-olive/5",children:e.jsx(hs,{size:"lg",text:"Carregando a comunidade..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-coral/5 to-olive/5 text-gray-800",children:[F.visible&&e.jsx("div",{className:"fixed top-5 right-5 z-[70]",children:e.jsxs("div",{className:"w-80 bg-white rounded-lg shadow-lg ring-1 ring-black/5 overflow-hidden",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3",children:[e.jsx("div",{className:"flex-shrink-0 mt-1",children:e.jsx(Is,{className:"h-6 w-6 text-emerald-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:F.message}),e.jsx("div",{className:"text-xs text-gray-500",children:"Seu post foi publicado e aparece na comunidade."})]}),e.jsx("button",{"aria-label":"Fechar",onClick:()=>{T.current&&clearTimeout(T.current),W({visible:!1,message:""})},className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:e.jsx(Q,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"h-1 bg-emerald-100",children:e.jsx("div",{className:"h-full bg-emerald-500 animate-progress",style:{animationDuration:"4s"}})})]})}),e.jsx(ys,{}),e.jsxs("main",{className:"container mx-auto max-w-7xl px-3 sm:px-4 pb-20 md:pb-16 pt-4 sm:pt-6",children:[D&&e.jsx("div",{role:"region","aria-label":"Banner da Comunidade",className:"mb-4 sm:mb-6",children:e.jsxs("div",{className:`relative bg-white rounded-xl shadow-md p-3 sm:p-4 md:p-5 flex items-start gap-3 sm:gap-4 transform transition-all duration-300 ease-out ${g?"opacity-100 translate-y-0 scale-100":"opacity-0 -translate-y-2 scale-98 pointer-events-none"}`,"data-state":g?"open":"closing",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(Te,{className:"h-6 w-6 sm:h-8 sm:w-8 text-coral","aria-hidden":"true"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h2",{className:"text-base sm:text-lg font-bold text-gray-900",children:"Comunidade EmpowerUp"}),e.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Conecte-se, compartilhe e cresÃ§a com outras empreendedoras â€” participe de grupos, eventos e troque experiÃªncias."}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-2 sm:gap-3",children:[e.jsx(N,{className:"bg-olive hover:bg-olive/90 transition-transform transform hover:-translate-y-0.5",size:"sm","aria-label":"Saiba mais sobre a comunidade",children:"Saiba mais"}),e.jsx(N,{variant:"outline",size:"sm","aria-label":"Minimizar banner",onClick:()=>pe(),children:"Minimizar"})]})]}),e.jsx("button",{"aria-label":"Fechar banner",className:"absolute right-2 top-2 sm:right-3 sm:top-3 flex h-8 w-8 items-center justify-center rounded-lg text-gray-400 hover:bg-gray-100 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-coral transition-colors",onClick:()=>pe(),children:e.jsx(Q,{className:"h-4 w-4"})})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-4 lg:gap-6",children:[e.jsx(As,{active:U==="notificacoes"?"notificacoes":"comunidade"}),e.jsx("section",{className:"lg:col-span-6",children:e.jsxs("div",{className:"bg-transparent",children:[e.jsxs("div",{className:"space-y-4 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"px-1",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900",children:"Tudo para crescer seu negÃ³cio em um sÃ³ lugar"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Acesse cursos, planos e campanhas diretamente daqui da comunidade."})]}),e.jsx("div",{className:"grid gap-3 sm:gap-4 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3",children:fe.length>0?fe.map(s=>e.jsx(_,{to:s.to,className:"group focus:outline-none focus-visible:ring-2 focus-visible:ring-coral rounded-xl",children:e.jsxs(w,{className:"relative h-full flex flex-col transition-transform duration-200 transition-colors group-hover:-translate-y-1 group-hover:shadow-lg group-hover:bg-olive group-hover:border-olive/40",children:[e.jsx("button",{type:"button","aria-label":`Fechar card ${s.title}`,className:"absolute right-2 top-2 sm:right-3 sm:top-3 inline-flex h-6 w-6 sm:h-7 sm:w-7 items-center justify-center rounded-full bg-white/80 text-gray-400 transition hover:bg-white hover:text-gray-600 focus:outline-none focus-visible:ring-2 focus-visible:ring-coral",onClick:a=>as(a,s.id),children:e.jsx(Q,{className:"h-3 w-3 sm:h-4 sm:w-4"})}),e.jsxs(I,{className:"flex flex-row items-start gap-2 sm:gap-3 space-y-0 pb-3 sm:pb-4 pr-8 sm:pr-10 transition-colors",children:[e.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg transition-colors ${s.accent} group-hover:bg-white/20 group-hover:text-white`,children:e.jsx(s.icon,{className:"h-5 w-5 sm:h-6 sm:w-6","aria-hidden":"true"})}),e.jsxs("div",{className:"flex flex-col min-w-0 gap-1 transition-colors",children:[e.jsx(R,{className:"text-sm sm:text-base text-gray-900 leading-tight break-words transition-colors group-hover:text-white",children:s.title}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 leading-snug break-words whitespace-normal transition-colors group-hover:text-white/90",children:s.description})]})]}),e.jsx(y,{className:"pt-0 mt-auto transition-colors px-4 pb-3 sm:pb-4",children:e.jsxs(N,{variant:"ghost",className:"px-0 text-coral transition-colors hover:text-olive group-hover:text-white group-hover:hover:text-white text-sm",children:[s.cta," ",e.jsx(Le,{className:"inline h-3 w-3 sm:h-4 sm:w-4 ml-1"})]})})]})},s.id)):null})]}),e.jsx("div",{className:"mb-4 sm:mb-6",children:Ye()}),e.jsxs(ps,{value:U,onValueChange:Re,className:"w-full",children:[e.jsxs(xs,{className:"mb-3 sm:mb-4 grid w-full grid-cols-3 gap-1 rounded-xl bg-gray-100 p-1 shadow-sm",role:"tablist",children:[e.jsx(oe,{value:"posts",className:"rounded-lg px-3 py-2 text-sm font-medium transition-all data-[state=active]:bg-white data-[state=active]:shadow-sm sm:px-4 sm:py-2.5 sm:text-base",role:"tab",children:"Posts"}),e.jsx(oe,{value:"seguindo",className:"rounded-lg px-3 py-2 text-sm font-medium transition-all data-[state=active]:bg-white data-[state=active]:shadow-sm sm:px-4 sm:py-2.5 sm:text-base",role:"tab",children:"Seguindo"}),e.jsx(oe,{value:"grupos",className:"rounded-lg px-3 py-2 text-sm font-medium transition-all data-[state=active]:bg-white data-[state=active]:shadow-sm sm:px-4 sm:py-2.5 sm:text-base",role:"tab",children:"Grupos"})]}),e.jsx(J,{value:"posts",className:"mt-0",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[se(),ae(We,{title:"Nenhum post encontrado",description:v==="todos"?"Seja a primeira a compartilhar algo inspirador!":"Nenhum post encontrado para esta categoria."})]})}),e.jsx(J,{value:"seguindo",className:"mt-0",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[se(),ae(Ke,{icon:Ee,title:v==="todos"?"Ainda nÃ£o hÃ¡ posts de quem vocÃª segue":"Ainda nÃ£o hÃ¡ posts nesta categoria",description:v==="todos"?"Comece a seguir outras empreendedoras para acompanhar as novidades por aqui.":"As empreendedoras que vocÃª segue ainda nÃ£o compartilharam nessa categoria.",action:n?e.jsx(N,{variant:"outline",asChild:!0,children:e.jsx(_,{to:"/explorar",children:"Descobrir empreendedoras"})}):null})]})}),e.jsx(J,{value:"grupos",className:"mt-0",children:e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[se(),ae(A,{icon:$,title:"Nenhum post dos seus grupos",description:"Entre em grupos para ver os posts das empreendedoras que fazem parte das mesmas comunidades que vocÃª!",action:n?e.jsx(N,{variant:"outline",asChild:!0,children:e.jsx(_,{to:"/grupos",children:"Explorar grupos"})}):null})]})}),n&&e.jsx(J,{value:"notificacoes",className:"mt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"NotificaÃ§Ãµes"}),Be>0&&e.jsx(N,{variant:"ghost",size:"sm",onClick:os,className:"text-sm text-coral hover:text-coral",children:"Marcar todas como lidas"})]}),le.length>0?le.map(s=>{const a=Cs(s)||"UsuÃ¡rio",r=Ss(s),i=ks(s),m=s.from_user?.username;return e.jsx(w,{className:`shadow-sm cursor-pointer transition-colors ${s.is_read?"bg-white":"bg-blue-50 border-blue-200"}`,onClick:()=>rs(s),children:e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:ts(s)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-gray-900",children:m?e.jsxs(e.Fragment,{children:[e.jsx(_,{to:`/perfil/${m}`,onClick:h=>h.stopPropagation(),className:"font-medium hover:underline",children:a})," ",e.jsx("span",{className:"text-gray-700",children:r})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:a})," ",e.jsx("span",{className:"text-gray-700",children:r})]})}),i&&e.jsx("p",{className:"text-xs text-gray-500 mt-1 truncate",children:i}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:Bs(s.created_at)})]}),!s.is_read&&e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full flex-shrink-0"})]})})},s.id||`${s.type}-${s.created_at}`)}):e.jsx(w,{className:"shadow-sm",children:e.jsx(y,{className:"p-12 text-center",children:e.jsxs("div",{className:"text-gray-500",children:[e.jsx(_e,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Nenhuma notificaÃ§Ã£o"}),e.jsx("p",{className:"text-sm",children:"Suas notificaÃ§Ãµes aparecerÃ£o aqui"})]})})})]})})]})]})}),e.jsx(Js,{trending:l,events:j,groups:x})]})]}),xe&&e.jsx(be,{open:xe,onOpenChange:ee,children:e.jsxs(ve,{children:[e.jsxs(Ne,{children:[e.jsx(we,{children:"Configurar Nome de UsuÃ¡rio"}),e.jsx(ye,{children:"Complete seu perfil configurando um nome de usuÃ¡rio Ãºnico."})]}),e.jsx(Hs,{user:n,onUsernameSet:s=>{De({username:s}),ee(!1)}})]})}),e.jsx(be,{open:q,onOpenChange:s=>s?V(!0):de(),children:e.jsxs(ve,{className:"max-h-[90vh] w-[calc(100vw-3rem)] max-w-full overflow-y-auto overflow-x-hidden rounded-none p-0 sm:w-full sm:max-w-[640px] sm:rounded-lg sm:p-6",children:[e.jsxs(Ne,{className:"px-4 pt-6 pr-10 sm:px-0 sm:pt-0 sm:pr-0",children:[e.jsx(we,{className:"text-base font-semibold leading-snug text-gray-900 sm:text-lg",children:"Compartilhe algo com a comunidade"}),e.jsx(ye,{className:"text-xs text-muted-foreground sm:text-sm",children:"Crie uma nova publicaÃ§Ã£o para compartilhar com a comunidade."})]}),e.jsx("div",{className:"px-4 pb-6 sm:px-0",children:n?e.jsx(Ce,{user:n,onPostCreated:ge,className:"border-0 shadow-none"}):e.jsx(w,{className:"shadow-sm",children:e.jsxs(y,{className:"p-6 text-center",children:[e.jsx("p",{className:"mb-4 text-gray-600",children:"FaÃ§a login para publicar na comunidade"}),e.jsx(N,{asChild:!0,className:"bg-coral hover:bg-coral/90",children:e.jsx(_,{to:"/login",children:"Fazer login"})})]})})})]})}),e.jsx(Ns,{isOpen:ze,onClose:()=>{ce(!1),ie(null)},post:Me,onSave:Qe})]})}export{Da as default};
//# sourceMappingURL=ComunidadePage-NRf_JXpQ.js.map
