import{u as B,o as S,r as M,j as e,B as p,L as u,n as j,M as g}from"./index-DLqimMV8.js";import{S as N,g as E,b as P,a as o,c as z,n as F,M as H,U as T}from"./site-header-CKtPnSCF.js";import{C as $}from"./CommunityLeftSidebar-CgYDUEfw.js";import{C as I,b as L,c as q,a as O}from"./card-CY9-ve7w.js";import{C as D,A as f,a as b,b as v,U as V}from"./index-EfjSmcDM.js";import{B as G}from"./badge-CME7s750.js";import{f as w,S as J}from"./index-BgaOpAAA.js";import{R as K}from"./refresh-cw-BzSKEN6A.js";import{B as C,a as Q,b as W}from"./bookmark-B2_N_nt6.js";import{H as X}from"./heart-D1UYKJAB.js";import"./dropdown-menu-7k7ytBg1.js";import"./calendar-BcaNxl4E.js";import"./user-BOjY7V17.js";import"./log-out-Cu_b7vs0.js";import"./trending-up-D6ou80w9.js";import"./crown-BrBsF1Iu.js";import"./rocket-oRE_XYSN.js";import"./mail-D_LXhG2r.js";const y={like:(s="h-5 w-5 text-red-500")=>e.jsx(X,{className:s}),comment:(s="h-5 w-5 text-blue-500")=>e.jsx(g,{className:s}),follow:(s="h-5 w-5 text-green-500")=>e.jsx(T,{className:s}),save:(s="h-5 w-5 text-purple-500")=>e.jsx(W,{className:s}),message:(s="h-5 w-5 text-blue-500")=>e.jsx(g,{className:s}),group:(s="h-5 w-5 text-emerald-500")=>e.jsx(V,{className:s}),course:(s="h-5 w-5 text-amber-500")=>e.jsx(Q,{className:s}),system:(s="h-5 w-5 text-coral")=>e.jsx(J,{className:s}),campaign:(s="h-5 w-5 text-orange-500")=>e.jsx(H,{className:s}),default:(s="h-5 w-5 text-gray-500")=>e.jsx(C,{className:s})},Y=s=>{const l=F(s);return(y[l]||y.default)()};function ge(){const{user:s}=B(),{notifications:l,unreadCount:t,loading:c,error:d,lastUpdatedAt:x,refresh:m,markAsRead:k,markAllAsRead:A}=S();M.useEffect(()=>{m()},[m]);const _=async a=>{a.is_read||await k(a.id);const r=z(a);r&&(window.location.href=r)},U=async()=>{t!==0&&await A()},R=async()=>{await m()};return s?e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx("main",{className:"container mx-auto px-4 py-6 max-w-7xl",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-6",children:[e.jsx($,{active:"notificacoes",className:"lg:col-span-3"}),e.jsx("div",{className:"lg:col-span-9",children:e.jsxs(I,{children:[e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(q,{className:"text-2xl font-bold",children:"Notificações"}),x&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Última atualização: ",w(x)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(p,{variant:"outline",size:"sm",onClick:R,disabled:c,children:[e.jsx(K,{className:`h-4 w-4 mr-2 ${c?"animate-spin":""}`}),"Atualizar"]}),t>0&&e.jsxs(p,{variant:"outline",size:"sm",onClick:U,children:[e.jsx(D,{className:"h-4 w-4 mr-2"}),"Marcar todas como lidas"]})]})]}),t>0&&e.jsx("div",{className:"flex items-center gap-2 mt-4",children:e.jsxs(G,{variant:"destructive",children:[t," não ",t===1?"lida":"lidas"]})})]}),e.jsxs(O,{className:"p-0",children:[d&&e.jsx("div",{className:"px-6 py-4 text-sm text-red-600 bg-red-50 border-b border-red-100",children:d}),c?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-coral"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Carregando notificações..."})]}):l.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:l.map(a=>{const r=E(a),h=P(a),i=a.from_user?.username;return e.jsx("button",{type:"button",className:`w-full text-left p-6 transition-colors hover:bg-gray-50 ${a.is_read?"bg-white":"bg-blue-50"}`,onClick:()=>_(a),children:e.jsxs("div",{className:"flex items-start space-x-4",children:[i?e.jsx(u,{to:`/perfil/${i}`,onClick:n=>n.stopPropagation(),className:"flex-shrink-0",children:e.jsxs(f,{className:"w-12 h-12 hover:opacity-80 transition-opacity",children:[e.jsx(b,{src:a.from_user?.avatar_url?j.getPublicUrl(a.from_user.avatar_url):""}),e.jsx(v,{className:"bg-coral text-white",children:r?r.charAt(0).toUpperCase():"N"})]})}):e.jsxs(f,{className:"w-12 h-12",children:[e.jsx(b,{src:a.from_user?.avatar_url?j.getPublicUrl(a.from_user.avatar_url):""}),e.jsx(v,{className:"bg-coral text-white",children:r?r.charAt(0).toUpperCase():"N"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[Y(a),!a.is_read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsx("span",{className:"text-sm text-gray-500",children:w(a.created_at)})]}),e.jsx("p",{className:"text-base mt-2 text-gray-900",children:r&&i?e.jsxs(e.Fragment,{children:[e.jsx(u,{to:`/perfil/${i}`,onClick:n=>n.stopPropagation(),className:"font-medium hover:underline",children:r})," ",o(a)]}):r?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"font-medium",children:r})," ",o(a)]}):o(a)}),h&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:h})]})]})},a.id)})}):e.jsxs("div",{className:"py-12 text-center",children:[e.jsx(C,{className:"h-16 w-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nenhuma notificação"}),e.jsx("p",{className:"text-gray-500",children:"Suas notificações aparecerão aqui quando você receber curtidas, comentários e outras interações."})]})]})]})})]})})]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx("main",{className:"container mx-auto px-4 py-6 max-w-7xl",children:e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-500",children:"Você precisa estar logado para ver suas notificações."})})})]})}export{ge as default};
//# sourceMappingURL=NotificacoesPage-ByW0_K4Y.js.map
