import{u as B,r as t,m as _,j as e,B as o,n as I,L as F}from"./index-DLqimMV8.js";import{a as M}from"./index-iG6a_0Cv.js";import{C as U,b as V,a as q}from"./card-CY9-ve7w.js";import{B as D}from"./badge-CME7s750.js";import{I as O}from"./input-FZRWGTRd.js";import{S as z,a as G,b as R,c as $,d as S}from"./select-d49l-vTK.js";import{S as H}from"./switch-qz8-JLqm.js";import{u as K}from"./toast-7vBxPuBc.js";import{a as k}from"./bookmark-B2_N_nt6.js";import{S as J}from"./star-C8KDg0jJ.js";import{C as Q}from"./clock-BtJpcJw2.js";import{L as W}from"./layers-DqJk4Cvx.js";import"./site-header-CKtPnSCF.js";import"./index-EfjSmcDM.js";import"./dropdown-menu-7k7ytBg1.js";import"./index-BgaOpAAA.js";import"./heart-D1UYKJAB.js";import"./calendar-BcaNxl4E.js";import"./user-BOjY7V17.js";import"./log-out-Cu_b7vs0.js";import"./site-footer-btaBgloE.js";import"./loader-circle-ClwSyFO1.js";import"./crown-BrBsF1Iu.js";import"./map-pin-XNZDTA2K.js";import"./index-CFq4vo7_.js";import"./chevron-up-DKadsFnq.js";import"./circle-alert-Bp1UBQ88.js";const p={currentPage:1,perPage:12,hasNextPage:!1,hasPrevPage:!1},Ce=()=>{const{user:E}=B(),{addToast:f}=K(),x="all",[c,g]=t.useState([]),[l,A]=t.useState(p),[n,j]=t.useState(!1),[v,h]=t.useState(""),[d,N]=t.useState(""),[m,b]=t.useState(""),[u,y]=t.useState(!1),i=t.useCallback(async(s=1)=>{j(!0),h("");try{const a={page:s,limit:p.perPage};d&&(a.search=d),m&&(a.category=m),u&&(a.featured="1");const r=await _.listCourses(a);r?.success?(g(r.courses||[]),A({currentPage:r.pagination?.currentPage||s,perPage:r.pagination?.perPage||p.perPage,hasNextPage:!!r.pagination?.hasNextPage,hasPrevPage:!!r.pagination?.hasPrevPage})):(h(r?.message||"Não foi possível carregar os cursos."),g([]))}catch(a){console.error("Erro ao carregar cursos:",a),h(a?.message||"Erro ao carregar cursos."),g([]),a?.status===401&&f("Faça login para acessar todos os recursos dos cursos.","error")}finally{j(!1)}},[d,m,u,f]);t.useEffect(()=>{i(1)},[i]);const T=t.useMemo(()=>{const s=new Set;return c.forEach(a=>{a.categoria&&s.add(a.categoria)}),Array.from(s).sort()},[c]),P=()=>{N(""),b(""),y(!1),i(1)},C=s=>{s==="prev"&&l.hasPrevPage?i(Math.max(1,l.currentPage-1)):s==="next"&&l.hasNextPage&&i(l.currentPage+1)},L=s=>{const a=s.enrollment,r=a?.progresso?Math.round(a.progresso):0,w=s.imagem_capa?I.getPublicUrl(s.imagem_capa):null;return e.jsxs(U,{className:"h-full flex flex-col overflow-hidden border border-gray-100 shadow-sm",children:[w&&e.jsx("div",{className:"h-44 w-full bg-gray-100 overflow-hidden",children:e.jsx("img",{src:w,alt:s.titulo,className:"w-full h-full object-cover"})}),e.jsxs(V,{className:"space-y-3 flex-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{variant:"secondary",className:"text-xs",children:s.categoria||"Geral"}),s.destaque&&e.jsxs("span",{className:"inline-flex items-center gap-1 text-xs font-semibold text-amber-600",children:[e.jsx(J,{className:"h-3.5 w-3.5"})," Destaque"]})]}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 leading-snug line-clamp-2",children:s.titulo}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-3",children:s.descricao||"Aprenda com especialistas e avance em sua jornada empreendedora."})]}),e.jsxs(q,{className:"flex-1 flex flex-col justify-between space-y-4",children:[e.jsxs("div",{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{className:"h-4 w-4 text-coral"}),e.jsxs("span",{children:["Nível: ",s.nivel||"Todos"]})]}),s.duracao_estimado&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-4 w-4 text-emerald-500"}),e.jsxs("span",{children:[s.duracao_estimado," min de conteúdo"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-indigo-500"}),e.jsxs("span",{children:[s.modules?.length||0," módulo",(s.modules?.length||0)===1?"":"s"]})]})]}),a&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 uppercase tracking-wide",children:[e.jsxs("span",{children:["Status: ",a.status]}),e.jsxs("span",{children:[r,"% concluído"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-coral h-2 rounded-full transition-all",style:{width:`${Math.min(100,Math.max(0,r))}%`}})})]}),e.jsx("div",{className:"pt-2",children:e.jsx(o,{asChild:!0,className:"w-full bg-coral hover:bg-coral/90",children:e.jsx(F,{to:`/cursos/${s.slug||s.id}`,state:{course:s},children:a?"Continuar curso":E?"Ver detalhes":"Saiba mais"})})})]})]},s.id)};return e.jsx(M,{title:"Trilhas e Cursos EmpowerUp",subtitle:"Acelere seu crescimento com conteúdos exclusivos, organizado por especialistas do ecossistema.",breadcrumbs:[{label:"Início",href:"/"},{label:"Cursos"}],children:e.jsxs("section",{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-[2fr,1fr,auto] md:items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Busca por palavra-chave"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{placeholder:"Ex: marketing digital, finanças, liderança...",value:d,onChange:s=>N(s.target.value),onKeyDown:s=>{s.key==="Enter"&&i(1)}}),e.jsx(o,{type:"button",onClick:()=>i(1),disabled:n,children:"Buscar"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categoria"}),e.jsxs(z,{value:m||x,onValueChange:s=>b(s===x?"":s),children:[e.jsx(G,{children:e.jsx(R,{placeholder:"Todas as categorias"})}),e.jsxs($,{children:[e.jsx(S,{value:x,children:"Todas"}),T.map(s=>e.jsx(S,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Destaques"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx(H,{checked:u,onCheckedChange:y}),e.jsx("span",{children:"Mostrar apenas cursos em destaque"})]}),e.jsx(o,{variant:"ghost",className:"justify-start text-xs text-gray-500",onClick:P,children:"Limpar filtros"})]})]}),v&&e.jsx("div",{className:"rounded-lg border border-red-200 bg-red-50 p-4 text-sm text-red-700",children:v}),n?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:Array.from({length:6}).map((s,a)=>e.jsxs("div",{className:"animate-pulse space-y-4 rounded-lg border border-gray-200 bg-white p-6",children:[e.jsx("div",{className:"h-40 w-full rounded-md bg-gray-200"}),e.jsx("div",{className:"h-4 w-1/2 rounded bg-gray-200"}),e.jsx("div",{className:"h-3 w-full rounded bg-gray-200"}),e.jsx("div",{className:"h-3 w-5/6 rounded bg-gray-200"}),e.jsx("div",{className:"h-10 w-full rounded bg-gray-200"})]},a))}):c.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:c.map(L)}),e.jsxs("div",{className:"flex items-center justify-between pt-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["Página ",l.currentPage]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(o,{variant:"outline",size:"sm",onClick:()=>C("prev"),disabled:!l.hasPrevPage||n,children:"Anterior"}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>C("next"),disabled:!l.hasNextPage||n,children:"Próxima"})]})]})]}):e.jsxs("div",{className:"rounded-lg border border-dashed border-gray-300 bg-white p-12 text-center",children:[e.jsx(k,{className:"mx-auto h-12 w-12 text-gray-300"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-gray-900",children:"Nenhum curso encontrado"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Ajuste os filtros de busca ou volte mais tarde para descobrir novos conteúdos."}),e.jsx(o,{className:"mt-4",onClick:P,children:"Ver todos os cursos"})]})]})})};export{Ce as default};
//# sourceMappingURL=CoursesPage-BQspOfUw.js.map
