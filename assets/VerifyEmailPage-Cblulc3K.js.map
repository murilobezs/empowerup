{"version":3,"file":"VerifyEmailPage-Cblulc3K.js","sources":["../../src/pages/VerifyEmailPage.jsx"],"sourcesContent":["import { useEffect, useMemo, useState } from \"react\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport { CheckCircle2, Loader2, XCircle } from \"lucide-react\";\r\nimport { SiteHeader } from \"../components/site-header\";\r\nimport { SiteFooter } from \"../components/site-footer\";\r\nimport { Button } from \"../components/ui/button\";\r\nimport { ROUTES } from \"../constants\";\r\nimport apiService from \"../services/api\";\r\nimport { FloatingPlusBackdrop } from \"../components/common\";\r\nimport { useAuth } from \"../contexts/AuthContext\";\r\n\r\nconst statusCopy = {\r\n  success: {\r\n    title: \"Conta confirmada com sucesso!\",\r\n    description: \"Seu email foi verificado e sua conta está ativa. Você já pode explorar toda a comunidade EmpowerUp sem limitações.\",\r\n    icon: CheckCircle2,\r\n    iconClass: \"text-emerald-500\"\r\n  },\r\n  error: {\r\n    title: \"Não foi possível verificar o email\",\r\n    description: \"O link pode ter expirado ou já ter sido utilizado. Solicite um novo link pelo app ou tente novamente mais tarde.\",\r\n    icon: XCircle,\r\n    iconClass: \"text-red-500\"\r\n  }\r\n};\r\n\r\nexport default function VerifyEmailPage() {\r\n  const [searchParams] = useSearchParams();\r\n  const token = searchParams.get(\"token\") || \"\";\r\n  const [status, setStatus] = useState(token ? \"loading\" : \"error\");\r\n  const [message, setMessage] = useState(token ? \"Confirmando sua conta...\" : \"Token de verificação não encontrado.\");\r\n  const navigate = useNavigate();\r\n  const { user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    let active = true;\r\n\r\n    const verify = async () => {\r\n      if (!token) {\r\n        setStatus(\"error\");\r\n        setMessage(\"Link de verificação inválido. Solicite um novo link pelo app.\");\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const response = await apiService.verifyEmail(token);\r\n\r\n        if (!active) return;\r\n\r\n        if (response?.success) {\r\n          setStatus(\"success\");\r\n          setMessage(response.message || \"Email verificado com sucesso!\");\r\n        } else {\r\n          setStatus(\"error\");\r\n          setMessage(response?.message || \"Não foi possível verificar seu email.\");\r\n        }\r\n      } catch (error) {\r\n        if (!active) return;\r\n        setStatus(\"error\");\r\n        setMessage(error?.message || \"Ocorreu um erro ao verificar seu email.\");\r\n      }\r\n    };\r\n\r\n    verify();\r\n\r\n    return () => {\r\n      active = false;\r\n    };\r\n  }, [token]);\r\n\r\n  const copy = useMemo(() => statusCopy[status] ?? statusCopy.error, [status]);\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen flex-col bg-blush\">\r\n      <SiteHeader />\r\n      <main className=\"relative isolate flex-1 overflow-hidden\">\r\n        <FloatingPlusBackdrop className=\"opacity-60\" />\r\n        <div className=\"relative z-10 mx-auto flex w-full max-w-3xl flex-1 items-center px-4 py-12 sm:px-6 lg:px-8\">\r\n          <div className=\"w-full\">\r\n            <div className=\"mx-auto max-w-2xl rounded-3xl bg-white/90 p-8 shadow-2xl shadow-coral/10 backdrop-blur\">\r\n              {status === \"loading\" ? (\r\n                <div className=\"flex flex-col items-center gap-6 text-center\">\r\n                  <Loader2 className=\"h-14 w-14 animate-spin text-coral\" aria-hidden=\"true\" />\r\n                  <h1 className=\"text-2xl font-semibold text-gray-900\">Estamos confirmando seu email...</h1>\r\n                  <p className=\"text-base text-muted-foreground\">Isso leva apenas alguns segundos. Obrigada por esperar! ✨</p>\r\n                </div>\r\n              ) : (\r\n                <div className=\"flex flex-col items-center gap-6 text-center\">\r\n                  <div className={`flex h-20 w-20 items-center justify-center rounded-full bg-white shadow-inner ${copy.iconClass}`}>\r\n                    <copy.icon className=\"h-10 w-10\" aria-hidden=\"true\" />\r\n                  </div>\r\n                  <div className=\"space-y-3\">\r\n                    <h1 className=\"text-3xl font-bold text-gray-900\">{copy.title}</h1>\r\n                    <p className=\"text-base text-muted-foreground\">{copy.description}</p>\r\n                    {message && (\r\n                      <p className=\"text-sm font-medium text-gray-600\">{message}</p>\r\n                    )}\r\n                  </div>\r\n\r\n                  <div className=\"mt-4 flex w-full flex-col gap-3 sm:flex-row sm:justify-center\">\r\n                    <Button\r\n                      className=\"flex-1 bg-coral text-white hover:bg-coral/90\"\r\n                      onClick={() => navigate(user ? ROUTES.FEED : ROUTES.LOGIN)}\r\n                    >\r\n                      {user ? \"Ir para a comunidade\" : \"Fazer login\"}\r\n                    </Button>\r\n                    {status === \"error\" && (\r\n                      <Button\r\n                        variant=\"outline\"\r\n                        className=\"flex-1\"\r\n                        onClick={() => navigate(ROUTES.REGISTER)}\r\n                      >\r\n                        Criar nova conta\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                    Se precisar de ajuda, fale com a gente pelo email {\" \"}\r\n                    <a href=\"mailto:suporte@empowerup.com.br\" className=\"font-medium text-coral underline offset-2\">\r\n                      suporte@empowerup.com.br\r\n                    </a>\r\n                    .\r\n                  </p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n      <SiteFooter />\r\n    </div>\r\n  );\r\n}\r\n"],"names":["statusCopy","CheckCircle2","XCircle","VerifyEmailPage","searchParams","useSearchParams","token","status","setStatus","useState","message","setMessage","navigate","useNavigate","user","useAuth","useEffect","active","response","apiService","error","copy","useMemo","jsxs","jsx","SiteHeader","FloatingPlusBackdrop","Loader2","Button","ROUTES","SiteFooter"],"mappings":"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"}