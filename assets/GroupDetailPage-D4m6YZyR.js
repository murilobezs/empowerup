import{c as Ie,r as t,j as e,D as gs,q as hs,s as vs,t as js,v as fs,B as f,w as Ns,a as bs,u as ys,m as x,p as oe,l as ws}from"./index-DLqimMV8.js";import{M as le}from"./index-iG6a_0Cv.js";import{C as v,b as T,c as L,a as j}from"./card-CY9-ve7w.js";import{B as F}from"./badge-CME7s750.js";import{A as ne,a as ce,b as de,U as Me}from"./index-EfjSmcDM.js";import{T as Ss,a as Cs,b as Ps,c as me}from"./tabs-CjUoFsGL.js";import{u as ks}from"./toast-7vBxPuBc.js";import{I as V}from"./input-FZRWGTRd.js";import{T as Ae}from"./textarea-Dc95vB93.js";import{L as y}from"./label-DBxNtR5w.js";import{S as Re,a as Te,b as Le,c as Fe,d as Ge}from"./select-d49l-vTK.js";import{S as Es,E as _s}from"./EditPostModal-FMrAoioO.js";import{E as Ms}from"./EmpowerUpCreatePost-_RHOb7Hi.js";import{C as As}from"./circle-alert-Bp1UBQ88.js";import{G as Rs}from"./globe-AW3VTD_N.js";import{L as Ts}from"./lock-D_uok8iM.js";import{S as De}from"./shield-check-pjyo1ri8.js";import{T as Ls}from"./tag-6iqodST4.js";import{L as G}from"./loader-circle-ClwSyFO1.js";import{C as Fs}from"./clock-3-Wu6_FBaE.js";import{M as Gs}from"./mail-check-dYuQ55v7.js";import"./site-header-CKtPnSCF.js";import"./dropdown-menu-7k7ytBg1.js";import"./index-BgaOpAAA.js";import"./bookmark-B2_N_nt6.js";import"./heart-D1UYKJAB.js";import"./calendar-BcaNxl4E.js";import"./user-BOjY7V17.js";import"./log-out-Cu_b7vs0.js";import"./site-footer-btaBgloE.js";import"./crown-BrBsF1Iu.js";import"./map-pin-XNZDTA2K.js";import"./index-CFq4vo7_.js";import"./chevron-up-DKadsFnq.js";import"./send-COm1LQ5b.js";import"./square-pen-CjVE55qt.js";import"./trash-2-CP23ljvT.js";import"./hash-CzDnjanY.js";import"./video-BK-m8ucD.js";import"./chart-column-D_csKldJ.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],zs=Ie("settings-2",Ds);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],qs=Ie("user-minus",Is),ze={nome:"",descricao:"",categoria:"",regras:"",tags:"",privacidade:"publico",moderacao_nivel:"moderado",imagem:"",imagem_capa:""},Us=[{value:"publico",label:"Público"},{value:"privado",label:"Privado"},{value:"somente_convidados",label:"Somente convidadas"}],Os=[{value:"aberto",label:"Aberto (entrada imediata)"},{value:"moderado",label:"Moderado (confirmação necessária)"},{value:"restrito",label:"Restrito (maior controle)"}];function Bs({open:c,onOpenChange:m,group:d,onSubmit:D,saving:w=!1}){const[i,a]=t.useState(ze);t.useEffect(()=>{c&&a(d?{nome:d.nome||"",descricao:d.descricao||"",categoria:d.categoria||"",regras:d.regras||"",tags:Array.isArray(d.tags)?d.tags.join(", "):d.tags||"",privacidade:d.privacidade||"publico",moderacao_nivel:d.moderacao_nivel||"moderado",imagem:d.imagem||"",imagem_capa:d.imagem_capa||""}:ze)},[d,c]);const S=t.useMemo(()=>i.nome.trim().length>2,[i.nome]),p=u=>b=>{const se=b?.target?b.target.value:b;a(z=>({...z,[u]:se}))},M=u=>{u.preventDefault(),!(!S||w)&&D?.({...i})};return e.jsx(gs,{open:c,onOpenChange:m,children:e.jsxs(hs,{className:"sm:max-w-3xl",children:[e.jsxs(vs,{children:[e.jsx(js,{children:"Configurações do grupo"}),e.jsx(fs,{children:"Personalize as informações principais do grupo e defina como novas integrantes podem participar."})]}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(y,{htmlFor:"nome",children:"Nome do grupo"}),e.jsx(V,{id:"nome",required:!0,value:i.nome,onChange:p("nome"),placeholder:"Comunidade das Empreendedoras Criativas"})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(y,{htmlFor:"descricao",children:"Descrição"}),e.jsx(Ae,{id:"descricao",rows:4,value:i.descricao,onChange:p("descricao"),placeholder:"Explique o propósito, temas e o que as empreendedoras encontram por aqui."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"categoria",children:"Categoria principal"}),e.jsx(V,{id:"categoria",value:i.categoria,onChange:p("categoria"),placeholder:"Ex.: Marketing, Tecnologia, Artesanato"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"tags",children:"Tags"}),e.jsx(V,{id:"tags",value:i.tags,onChange:p("tags"),placeholder:"Separe por vírgula (ex.: networking,finanças,inspiração)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"privacidade",children:"Privacidade"}),e.jsxs(Re,{value:i.privacidade,onValueChange:p("privacidade"),children:[e.jsx(Te,{id:"privacidade",children:e.jsx(Le,{placeholder:"Selecione a privacidade"})}),e.jsx(Fe,{children:Us.map(u=>e.jsx(Ge,{value:u.value,children:u.label},u.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"moderacao",children:"Moderação"}),e.jsxs(Re,{value:i.moderacao_nivel,onValueChange:p("moderacao_nivel"),children:[e.jsx(Te,{id:"moderacao",children:e.jsx(Le,{placeholder:"Selecione como novas integrantes entram"})}),e.jsx(Fe,{children:Os.map(u=>e.jsx(Ge,{value:u.value,children:u.label},u.value))})]})]}),e.jsxs("div",{className:"space-y-2 sm:col-span-2",children:[e.jsx(y,{htmlFor:"regras",children:"Regras e orientações"}),e.jsx(Ae,{id:"regras",rows:3,value:i.regras,onChange:p("regras"),placeholder:"Compartilhe as boas práticas, combinados e links úteis para manter a comunidade segura."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"imagem",children:"Imagem (avatar)"}),e.jsx(V,{id:"imagem",value:i.imagem,onChange:p("imagem"),placeholder:"URL da imagem quadrada do grupo"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"imagem_capa",children:"Imagem de capa"}),e.jsx(V,{id:"imagem_capa",value:i.imagem_capa,onChange:p("imagem_capa"),placeholder:"URL para a capa do grupo"})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3 border-t pt-4",children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>m?.(!1),disabled:w,children:"Cancelar"}),e.jsx(f,{type:"submit",disabled:!S||w,children:w?"Salvando...":"Salvar alterações"})]})]})]})})}const Vs=[{value:"overview",label:"Visão geral"},{value:"discussions",label:"Discussões"},{value:"members",label:"Membros"}],ee=10;function pe(c=""){if(!c)return"?";const m=c.trim().split(/\s+/);return m.length===1?m[0].slice(0,2).toUpperCase():`${m[0][0]}${m[m.length-1][0]}`.toUpperCase()}function $s(c){if(Array.isArray(c))return c;if(typeof c=="string"&&c.trim()){try{const m=JSON.parse(c);if(Array.isArray(m))return m}catch{}return c.split(",").map(m=>m.trim()).filter(Boolean)}return[]}function Ra(){const{slug:c}=Ns(),m=bs(),{user:d}=ys(),{addToast:D}=ks(),w=t.useRef(D);t.useEffect(()=>{w.current=D},[D]);const i=t.useCallback((s,r="info")=>{typeof w.current=="function"&&w.current(s,r)},[]),[a,S]=t.useState(null),[p,M]=t.useState([]),[u,b]=t.useState(0),[se,z]=t.useState(!0),[qe,ue]=t.useState("overview"),[xe,Ue]=t.useState([]),[Oe,ge]=t.useState(!1),[$,he]=t.useState(!1),[H,ve]=t.useState(!1),[J,je]=t.useState(null),[fe,Ne]=t.useState(null),[Be,ae]=t.useState(!1),[Ve,be]=t.useState(!1),[E,N]=t.useState([]),[Q,re]=t.useState(!1),[Z,te]=t.useState(!1),[K,C]=t.useState(null),[A,I]=t.useState({page:1,pages:1,total:0,limit:ee}),[$e,ye]=t.useState(null),[He,we]=t.useState(!1),g=t.useCallback(async()=>{if(!c){S(null),M([]),b(0),z(!1);return}z(!0);const s=/^\d+$/.test(c);try{let r=null;if(s)r=await x.getGroup(c);else try{r=await x.getGroupBySlug(c)}catch(o){if(o?.status===404&&/^\d+$/.test(c))r=await x.getGroup(c);else throw o}r?.success?(S(r.group),M(r.members||[]),b(r.pending_requests||0)):(i(r?.message||"Grupo não encontrado","error"),S(null),M([]),b(0))}catch(r){console.error("Erro ao carregar grupo",r),i(r?.message||"Não foi possível carregar o grupo","error"),S(null),M([]),b(0)}finally{z(!1)}},[c,i]);t.useEffect(()=>{g()},[g]);const P=!!a?.permissions?.can_moderate,Je=!!a?.permissions?.can_edit,W=a?.membership?.status,Se=!!a?.membership?.is_member,q=!!a?.membership?.is_pending,Ce=d?.tipo==="admin",_=Ce||Se,Qe=_&&!q,Ze=(A.page??1)<(A.pages??1),Ke=t.useMemo(()=>a&&(a?.privacidade==="somente_convidados"||a?.moderacao_nivel==="restrito")?"Solicitar participação":"Participar do grupo",[a]),R=t.useCallback(async()=>{if(!(!a?.id||!P)){ge(!0);try{const s=await x.listGroupRequests(a.id);s?.success?(Ue(s.requests||[]),b(s.requests?s.requests.length:0)):i(s?.message||"Erro ao carregar solicitações","error")}catch(s){console.error("Erro ao carregar solicitações do grupo",s),i("Falha ao carregar solicitações pendentes","error")}finally{ge(!1)}}},[a?.id,P,i]);t.useEffect(()=>{P&&R()},[P,R]);const We=t.useCallback(async()=>{if(!(!a?.id||$)){he(!0);try{const s=await x.joinGroup(a.id);s?.success?(i(s?.message||"Você entrou no grupo!","success"),await g(),P&&await R()):i(s?.message||"Não foi possível participar do grupo","error")}catch(s){console.error("Erro ao entrar no grupo",s),i(s?.message||"Não foi possível participar do grupo","error")}finally{he(!1)}}},[a?.id,$,i,g,P,R]),Xe=t.useCallback(async()=>{if(!(!a?.id||H)&&window.confirm("Tem certeza que deseja sair deste grupo?")){ve(!0);try{const s=await x.leaveGroup(a.id);s?.success?(i(s?.message||"Você saiu do grupo","success"),await g()):i(s?.message||"Não foi possível sair do grupo","error")}catch(s){console.error("Erro ao sair do grupo",s),i(s?.message||"Não foi possível sair do grupo","error")}finally{ve(!1)}}},[a?.id,H,i,g]),Pe=t.useCallback(async(s,r)=>{if(a?.id){je(s);try{const o=await x.respondGroupRequest(a.id,s,r);o?.success?(i("Solicitação atualizada","success"),await Promise.all([R(),g()])):i(o?.message||"Não foi possível atualizar a solicitação","error")}catch(o){console.error("Erro ao atualizar solicitação",o),i(o?.message||"Não foi possível atualizar a solicitação","error")}finally{je(null)}}},[a?.id,i,R,g]),Ye=t.useCallback(async s=>{if(!(!a?.id||!s)&&window.confirm("Remover esta integrante do grupo?")){Ne(s);try{const r=await x.removeGroupMember(a.id,s);r?.success?(i("Integrante removida","success"),await g()):i(r?.message||"Não foi possível remover a integrante","error")}catch(r){console.error("Erro ao remover integrante",r),i(r?.message||"Não foi possível remover a integrante","error")}finally{Ne(null)}}},[a?.id,i,g]),es=t.useCallback(async s=>{if(a?.id){be(!0);try{const r={...s,tags:s.tags?s.tags.split(",").map(l=>l.trim()).filter(Boolean):[]},o=await x.updateGroup(a.id,r);o?.success?(i("Configurações atualizadas","success"),ae(!1),await g()):i(o?.message||"Não foi possível salvar as alterações","error")}catch(r){console.error("Erro ao atualizar grupo",r),i(r?.message||"Não foi possível salvar as alterações","error")}finally{be(!1)}}},[a?.id,i,g]),X=t.useCallback(async(s=1,r=!1)=>{if(!a?.id||!_)return;const o=ee;r?te(!0):(re(!0),C(null));try{const l=await x.getGroupPosts(a.id,{page:s,limit:o});if(l?.success){const n=l.posts||[];let U=0;N(O=>{if(!r)return n;const Y=new Set(O.map(k=>k.id)),B=[...O];return n.forEach(k=>{Y.has(k.id)||(B.push(k),U+=1)}),B});const h=l.pagination||{};I(O=>{const Y=h.total??h.totalPosts,B=Y!==void 0?Y:r?(O.total??0)+U:n.length,k=h.limit??h.per_page??o,xs=h.pages??h.totalPages??(k?Math.max(1,Math.ceil(B/k)):O.pages);return{page:h.page??s,pages:xs,total:B,limit:k}}),C(null)}else r||N([]),C(l?.message||"Não foi possível carregar as publicações do grupo.")}catch(l){r||N([]),l?.status===403?C("Você precisa ser integrante ativa deste grupo para visualizar as discussões."):(C(l?.message||"Erro ao carregar as discussões do grupo."),i("Erro ao carregar as discussões do grupo","error"))}finally{r?te(!1):re(!1)}},[a?.id,_,i]),ss=t.useCallback(async(s,r)=>{if(!a?.id)return{success:!1,message:"Grupo inválido"};try{const o=await x.createPost({...s,grupo_id:a.id,escopo_visibilidade:"grupo"},r);if(o?.success&&o.post)return N(n=>{const U=n.findIndex(h=>h.id===o.post.id);if(U>=0){const h=[...n];return h.splice(U,1),[o.post,...h]}return[o.post,...n]}),I(n=>({...n,total:(n.total??0)+1})),S(n=>n&&{...n,ultima_atividade:new Date().toISOString()}),C(null),{success:!0,post:o.post};const l=o?.message||"Não foi possível publicar no grupo.";return i(l,"error"),{success:!1,message:l}}catch(o){const l=o?.message||"Erro ao publicar no grupo.";return i(l,"error"),{success:!1,message:l}}},[a?.id,i]),as=t.useCallback(()=>{if(Z)return;const s=(A.page??1)+1;s<=(A.pages??1)&&X(s,!0)},[Z,A.page,A.pages,X]),rs=t.useCallback((s,r,o)=>{N(l=>l.map(n=>n.id===s?{...n,likes:o,likes_count:o,user_liked:r,isLiked:r}:n))},[]),ts=t.useCallback((s,r)=>{N(o=>o.map(l=>l.id===s?{...l,user_saved:r,isSaved:r}:l))},[]),is=t.useCallback(async s=>{if(window.confirm("Remover esta publicação do grupo?"))try{const r=await x.deletePost(s);if(r?.success)N(o=>o.filter(l=>l.id!==s)),I(o=>({...o,total:Math.max((o.total??1)-1,0)})),i(r?.message||"Post removido com sucesso.","success");else throw new Error(r?.message||"Não foi possível remover o post.")}catch(r){console.error("Erro ao remover post do grupo",r),i(r?.message||"Não foi possível remover o post.","error")}},[i]),os=t.useCallback(s=>{ye(s),we(!0)},[]),ls=t.useCallback(()=>{we(!1),ye(null)},[]),ns=t.useCallback(async(s,r)=>{const o=await x.updatePost(s,r);if(o?.success&&o.post)return N(l=>l.map(n=>n.id===s?{...n,...o.post}:n)),o.post;throw new Error(o?.message||"Não foi possível atualizar o post.")},[]);t.useEffect(()=>{if(!a?.id){N([]),C(null),I({page:1,pages:1,total:0,limit:ee});return}_?X(1,!1):(N([]),I({page:1,pages:1,total:0,limit:ee}),C(q?"Sua solicitação ainda está pendente. Assim que for aprovada, o feed ficará disponível.":"Entre no grupo para visualizar e participar das discussões internas."),re(!1),te(!1))},[a?.id,_,q,X]);const ke=q?"Sua solicitação ainda está pendente. Assim que for aprovada, o mural ficará disponível.":"Entre no grupo para visualizar e participar das discussões internas.",Ee=t.useMemo(()=>$s(a?.tags),[a?.tags]),ie=t.useMemo(()=>E.slice(0,3),[E]),cs=t.useCallback(s=>{if(s?.timeAgo)return s.timeAgo;if(s?.created_at){const r=new Date(s.created_at);if(!Number.isNaN(r.getTime()))return r.toLocaleDateString("pt-BR",{day:"2-digit",month:"short"})}return""},[]),ds=()=>a?Se?e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[Je&&e.jsxs(f,{variant:"secondary",onClick:()=>ae(!0),children:[e.jsx(zs,{className:"mr-2 h-4 w-4"}),"Personalizar grupo"]}),e.jsx(f,{variant:"outline",onClick:Xe,disabled:H,children:H?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Saindo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qs,{className:"mr-2 h-4 w-4"}),"Sair do grupo"]})})]}):q?e.jsxs(f,{variant:"secondary",disabled:!0,className:"opacity-80",children:[e.jsx(Fs,{className:"mr-2 h-4 w-4"}),"Solicitação pendente"]}):e.jsx(f,{onClick:We,disabled:$,children:$?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Enviando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{className:"mr-2 h-4 w-4"}),Ke]})}):null,ms=()=>P?e.jsxs(v,{children:[e.jsx(T,{children:e.jsxs(L,{className:"flex items-center gap-2 text-base",children:[e.jsx(De,{className:"h-4 w-4 text-olive"}),"Solicitações pendentes",u>0&&e.jsx(F,{variant:"secondary",className:"ml-auto bg-olive/15 text-olive",children:u})]})}),e.jsx(j,{className:"space-y-4",children:Oe?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsx("div",{className:"animate-pulse rounded-lg border border-dashed border-gray-200 p-3",children:e.jsx("div",{className:"h-4 w-1/3 bg-gray-200/70"})},s))}):xe.length===0?e.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma solicitação aguardando aprovação."}):e.jsx("div",{className:"space-y-3",children:xe.map(s=>e.jsx("div",{className:"rounded-xl border border-gray-100 p-3 shadow-sm",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ne,{className:"h-10 w-10",children:[e.jsx(ce,{src:s.usuario?.avatar_url||void 0,alt:s.usuario?.nome}),e.jsx(de,{children:pe(s.usuario?.nome)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:s.usuario?.nome}),e.jsxs("p",{className:"text-xs text-gray-500",children:["@",s.usuario?.username]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{size:"sm",variant:"outline",disabled:J===s.id,onClick:()=>Pe(s.id,"rejeitado"),children:J===s.id?e.jsx(G,{className:"h-4 w-4 animate-spin"}):"Recusar"}),e.jsx(f,{size:"sm",disabled:J===s.id,onClick:()=>Pe(s.id,"aprovado"),children:J===s.id?e.jsx(G,{className:"h-4 w-4 animate-spin"}):"Aceitar"})]})]})},s.id))})})]}):null,ps=(s="grid")=>p.length?e.jsx("div",{className:s==="grid"?"grid gap-4 sm:grid-cols-2":"space-y-3",children:p.map(r=>{const o=r.is_self,l=P&&r.can_be_removed&&!o;return e.jsx(v,{className:"overflow-hidden border border-gray-100",children:e.jsxs(j,{className:"flex items-center justify-between gap-4 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(ne,{className:"h-12 w-12",children:[e.jsx(ce,{src:r.avatar_url||void 0,alt:r.nome}),e.jsx(de,{children:pe(r.nome)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900",children:r.nome}),e.jsxs("p",{className:"text-xs text-gray-500",children:["@",r.username]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx(F,{variant:"secondary",className:"bg-olive/10 text-olive",children:r.papel==="owner"?"Criadora":r.papel==="moderador"?"Moderadora":"Membro"}),r.status!=="ativo"&&e.jsx(F,{variant:"secondary",className:"bg-amber-100 text-amber-700",children:r.status})]})]})]}),l&&e.jsx(f,{variant:"ghost",size:"sm",className:"text-red-500 hover:text-red-600",disabled:fe===r.id,onClick:()=>Ye(r.id),children:fe===r.id?e.jsx(G,{className:"h-4 w-4 animate-spin"}):"Remover"})]})},r.id)})}):e.jsx(v,{children:e.jsx(j,{className:"py-8 text-center text-sm text-gray-500",children:"Ainda não há integrantes ativas além da criadora."})});if(se)return e.jsx(le,{children:e.jsx("div",{className:"flex min-h-[50vh] items-center justify-center",children:e.jsx(oe,{})})});if(!a)return e.jsx(le,{children:e.jsxs("div",{className:"mx-auto max-w-3xl px-4 py-20 text-center",children:[e.jsx(As,{className:"mx-auto h-12 w-12 text-coral"}),e.jsx("h1",{className:"mt-6 text-2xl font-bold text-gray-900",children:"Grupo não encontrado"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Talvez o link tenha expirado ou você não tenha permissão para visualizar este grupo."}),e.jsx(f,{className:"mt-6",onClick:()=>m(-1),children:"Voltar"})]})});const _e=a.imagem_capa||"",us=a.imagem||"";return e.jsxs(le,{children:[e.jsxs("div",{className:"relative overflow-hidden bg-slate-900 text-white",children:[_e?e.jsxs("div",{className:"absolute inset-0",children:[e.jsx("img",{src:_e,alt:`Capa do grupo ${a.nome}`,className:"h-full w-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-slate-900/65"})]}):e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-6 px-4 py-10 md:flex-row md:items-end md:justify-between",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"-mt-12 overflow-hidden rounded-2xl border-4 border-white/80 bg-white shadow-xl",children:e.jsxs(ne,{className:"h-24 w-24 text-xl md:h-28 md:w-28",children:[e.jsx(ce,{src:us||void 0,alt:a.nome}),e.jsx(de,{className:"bg-olive text-white text-xl",children:pe(a.nome)})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight md:text-4xl",children:a.nome}),a.membership?.role&&e.jsx(F,{variant:"secondary",className:"bg-white/15 text-white",children:a.membership.role==="owner"?"Criadora":a.membership.role==="moderador"?"Moderadora":"Membro"}),Ce&&e.jsx(F,{variant:"outline",className:"border-white/60 text-white",children:"Admin"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-sm text-white/80",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Me,{className:"h-4 w-4"}),a.membros||p.length," membros"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[a.privacidade==="publico"?e.jsx(Rs,{className:"h-4 w-4"}):e.jsx(Ts,{className:"h-4 w-4"}),a.privacidade==="publico"?"Público":a.privacidade==="privado"?"Privado":"Somente convidadas"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(De,{className:"h-4 w-4"}),a.moderacao_nivel==="aberto"?"Entrada imediata":a.moderacao_nivel==="moderado"?"Moderado":"Restrito"]})]}),Ee.length>0&&e.jsx("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:Ee.map(s=>e.jsxs(F,{variant:"secondary",className:"bg-white/20 text-white",children:[e.jsx(Ls,{className:"mr-1 h-3 w-3"}),s]},s))})]})]}),e.jsxs("div",{className:"flex flex-col items-stretch gap-3 text-sm",children:[ds(),W&&e.jsxs("p",{className:"text-xs text-white/80",children:["Status atual: ",W==="ativo"?"Participando do grupo":W==="pendente"?"Aguardando aprovação":W]})]})]})})]}),e.jsx("div",{className:"mx-auto max-w-6xl px-4 py-8",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-2 space-y-6",children:e.jsxs(Ss,{value:qe,onValueChange:ue,className:"space-y-4",children:[e.jsx(Cs,{children:Vs.map(s=>e.jsx(Ps,{value:s.value,children:s.label},s.value))}),e.jsxs(me,{value:"overview",className:"space-y-4",children:[e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(L,{children:"Sobre o grupo"})}),e.jsxs(j,{className:"space-y-4 text-sm text-gray-600",children:[e.jsx("p",{children:a.descricao||"Este grupo ainda não possui uma descrição detalhada."}),e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Categoria"}),e.jsx("p",{className:"mt-1 text-sm text-gray-700",children:a.categoria||"Não definida"})]}),e.jsxs("div",{className:"rounded-lg bg-gray-50 p-3",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Moderação"}),e.jsx("p",{className:"mt-1 text-sm text-gray-700",children:a.moderacao_nivel==="aberto"?"Entradas imediatas":a.moderacao_nivel==="moderado"?"Solicitações precisam ser aprovadas":"Somente a criadora/moderadoras conseguem autorizar"})]})]}),e.jsxs("div",{className:"rounded-lg bg-white p-3 shadow-sm ring-1 ring-gray-100",children:[e.jsx("p",{className:"text-xs font-semibold uppercase tracking-wide text-gray-500",children:"Regras e combinados"}),e.jsx("p",{className:"mt-2 whitespace-pre-line text-sm text-gray-700",children:a.regras&&a.regras.trim().length>0?a.regras:"Estabeleça as regras do grupo para manter a comunidade colaborativa e segura."})]})]})]}),e.jsxs(v,{children:[e.jsx(T,{children:e.jsx(L,{children:"Atividade recente"})}),e.jsx(j,{className:"space-y-4",children:_?e.jsxs(e.Fragment,{children:[Q&&E.length===0&&e.jsx("div",{className:"flex justify-center py-6",children:e.jsx(oe,{})}),!Q&&ie.length===0&&e.jsx("div",{className:"rounded-lg border border-dashed border-gray-200 p-5 text-center text-sm text-gray-600",children:"Ainda não há publicações no mural deste grupo. Compartilhe a primeira ideia!"}),ie.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:ie.map(s=>e.jsxs("div",{className:"rounded-xl border border-gray-100 p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsx("span",{className:"font-semibold text-gray-900 text-sm truncate pr-4",children:s.autor}),e.jsx("span",{children:cs(s)})]}),e.jsx("p",{className:"mt-2 text-sm text-gray-700 line-clamp-3",children:s.conteudo})]},s.id))}),e.jsx(f,{variant:"link",className:"px-0 text-coral",onClick:()=>ue("discussions"),children:"Acessar mural completo"})]})]}):e.jsx("div",{className:"rounded-lg border border-dashed border-gray-200 p-5 text-center text-sm text-gray-600",children:ke})})]})]}),e.jsx(me,{value:"discussions",children:e.jsx("div",{className:"space-y-4",children:_?e.jsxs(e.Fragment,{children:[Qe&&d&&e.jsx(Ms,{user:d,onPostCreated:ss,groupId:a.id,className:"border border-gray-100 shadow-sm",placeholder:`Compartilhe algo com ${a.nome}`}),K&&e.jsx(v,{children:e.jsx(j,{className:"text-sm text-gray-600",children:K})}),Q&&E.length===0&&!K&&e.jsx(v,{children:e.jsx(j,{className:"flex justify-center py-10",children:e.jsx(oe,{})})}),E.length>0&&e.jsx("div",{className:"space-y-4",children:E.map(s=>e.jsx(Es,{post:s,currentUser:d,onLike:rs,onSave:ts,onDelete:is,onUpdate:os,showSaveButton:!0,showGroupBadge:!0,groupName:a.nome},s.id))}),!Q&&E.length===0&&!K&&e.jsx(v,{children:e.jsx(j,{className:"py-10 text-center text-sm text-gray-600",children:"Ainda não há discussões ativas neste grupo. Que tal iniciar uma conversa?"})}),Ze&&e.jsx("div",{className:"flex justify-center pt-2",children:e.jsx(f,{variant:"outline",onClick:as,disabled:Z,children:Z?e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"mr-2 h-4 w-4 animate-spin"}),"Carregando..."]}):"Carregar mais publicações"})})]}):e.jsx(v,{children:e.jsx(j,{className:"py-10 text-center text-sm text-gray-600",children:ke})})})}),e.jsx(me,{value:"members",className:"space-y-4",children:e.jsxs(v,{children:[e.jsxs(T,{children:[e.jsx(L,{children:"Membros do grupo"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[a.membros||p.length," empreendedoras participando"]})]}),e.jsx(j,{children:ps("list")})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(v,{children:[e.jsx(T,{children:e.jsxs(L,{className:"flex items-center gap-2 text-base",children:[e.jsx(Me,{className:"h-4 w-4 text-olive"}),"Estatísticas do grupo"]})}),e.jsxs(j,{className:"space-y-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Membros ativos"}),e.jsx("span",{className:"font-semibold text-gray-900",children:a.membros||p.length})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Solicitações pendentes"}),e.jsx("span",{className:"font-semibold text-gray-900",children:u})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Moderação"}),e.jsx("span",{className:"font-semibold text-gray-900",children:a.moderacao_nivel==="aberto"?"Aberto":a.moderacao_nivel==="moderado"?"Moderado":"Restrito"})]})]})]}),ms(),e.jsxs(v,{children:[e.jsx(T,{children:e.jsxs(L,{className:"flex items-center gap-2 text-base",children:[e.jsx(ws,{className:"h-4 w-4 text-coral"}),"Dicas de engajamento"]})}),e.jsxs(j,{className:"space-y-3 text-sm text-gray-600",children:[e.jsx("p",{children:"• Defina objetivos claros na descrição para atrair as pessoas certas."}),e.jsx("p",{children:"• Use as regras para combinar o tom das conversas e materiais permitidos."}),e.jsx("p",{children:"• Incentive apresentações e compartilhamento de conquistas no lançamento."})]})]})]})]})}),e.jsx(Bs,{open:Be,onOpenChange:ae,group:a,onSubmit:es,saving:Ve}),e.jsx(_s,{isOpen:He,onClose:ls,post:$e,onSave:ns})]})}export{Ra as default};
//# sourceMappingURL=GroupDetailPage-D4m6YZyR.js.map
