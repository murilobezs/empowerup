import{n as c}from"./index-DLqimMV8.js";const h=c.API_BASE_URL;class d{constructor(){this.baseURL=h}async request(e,t={}){const s=`${this.baseURL}${e}`,u={headers:{"Content-Type":"application/json",...t.headers},...t},r=JSON.parse(localStorage.getItem(c.AUTH.USER_KEY)||"{}");r&&r.token&&(u.headers.Authorization=`Bearer ${r.token}`);try{const n=await fetch(s,u),o=n.headers.get("content-type");let a;if(o&&o.includes("application/json")?a=await n.json():a=await n.text(),!n.ok){const i=new Error(a&&a.message?a.message:`HTTP error! status: ${n.status}`);throw i.status=n.status,i.data=a,i}return a}catch(n){throw console.error("API Request Error:",n),n}}async uploadRequest(e,t,s={}){const u=`${this.baseURL}${e}`,r={method:"POST",headers:{...s.headers},body:t,...s},n=JSON.parse(localStorage.getItem(c.AUTH.USER_KEY)||"{}");n&&n.token&&(r.headers.Authorization=`Bearer ${n.token}`);try{const o=await fetch(u,r),a=await o.json();if(!o.ok){const i=new Error(a&&a.message?a.message:`HTTP error! status: ${o.status}`);throw i.status=o.status,i.data=a,i}return a}catch(o){throw console.error("Upload Request Error:",o),o}}async register(e){return this.request("/auth/register",{method:"POST",body:JSON.stringify(e)})}async login(e){return this.request("/auth/login",{method:"POST",body:JSON.stringify(e)})}async getProfile(){return this.request("/auth/profile")}async refreshToken(){return this.request("/auth/refresh",{method:"POST"})}async verifyEmail(e){const t=new URLSearchParams({token:e}).toString();return this.request(`/auth/verify?${t}`,{method:"GET"})}async forgotPassword(e){return this.request("/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})})}async resetPassword(e,t){return this.request("/auth/reset-password",{method:"POST",body:JSON.stringify({token:e,newPassword:t})})}async getUser(e){return this.request(`/users/${e}`)}async updateProfile(e){return this.request("/users/profile",{method:"PUT",body:JSON.stringify(e)})}async updateAvatar(e){const t=new FormData;return t.append("avatar",e),this.uploadRequest("/users/avatar",t)}async searchUsers(e){return this.request(`/users/search?q=${encodeURIComponent(e)}`)}async checkUsername(e){return this.request(`/users/check-username/${encodeURIComponent(e)}`)}async getPosts(e={}){const t=new URLSearchParams(e).toString();return this.request(`/posts${t?"?"+t:""}`)}async getPost(e){return this.request(`/posts/${e}`)}async createPost(e={},t=null){const s={conteudo:e.conteudo,categoria:e.categoria||"Geral",tags:Array.isArray(e.tags)?e.tags:[],escopo_visibilidade:e.escopo_visibilidade,grupo_id:e.grupo_id};if(s.grupo_id&&!s.escopo_visibilidade&&(s.escopo_visibilidade="grupo"),t){const r=new FormData;return r.append("conteudo",s.conteudo),r.append("categoria",s.categoria),r.append("tags",JSON.stringify(s.tags)),s.grupo_id&&r.append("grupo_id",s.grupo_id),s.escopo_visibilidade&&r.append("escopo_visibilidade",s.escopo_visibilidade),t.type.startsWith("image/")?r.append("image",t):t.type.startsWith("video/")&&r.append("video",t),this.uploadRequest("/posts",r)}const u=Object.entries(s).reduce((r,[n,o])=>(o!=null&&o!==""&&(n==="tags"&&!Array.isArray(o)?r[n]=[]:r[n]=o),r),{});return this.request("/posts",{method:"POST",body:JSON.stringify(u)})}async updatePost(e,t){return this.request(`/posts/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deletePost(e){return this.request(`/posts/${e}`,{method:"DELETE"})}async searchPosts(e={}){const t=new URLSearchParams(e).toString();return this.request(`/posts/search${t?"?"+t:""}`)}async getExploreOverview(e={}){const t=new URLSearchParams(e).toString();return this.request(`/explore${t?"?"+t:""}`)}async getExploreTrending(e={}){const t=new URLSearchParams(e).toString();return this.request(`/explore/trending${t?"?"+t:""}`)}async searchExplore(e={}){const t=new URLSearchParams(e).toString();return this.request(`/explore/search${t?"?"+t:""}`)}async getComments(e,t={}){const s=new URLSearchParams(t).toString();return this.request(`/comments/posts/${e}${s?"?"+s:""}`)}async createComment(e,t){return this.request(`/comments/posts/${e}`,{method:"POST",body:JSON.stringify(t)})}async updateComment(e,t){return this.request(`/comments/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteComment(e){return this.request(`/comments/${e}`,{method:"DELETE"})}async toggleLike(e){return this.request(`/likes/posts/${e}`,{method:"POST"})}async getLikes(e,t={}){const s=new URLSearchParams(t).toString();return this.request(`/likes/posts/${e}${s?"?"+s:""}`)}async toggleFollowUser(e){return this.request(`/users/${e}/follow`,{method:"POST"})}async getFollowers(e,t={}){const s=new URLSearchParams(t).toString();return this.request(`/users/${e}/followers${s?"?"+s:""}`)}async getFollowing(e,t={}){const s=new URLSearchParams(t).toString();return this.request(`/users/${e}/following${s?"?"+s:""}`)}async sharePost(e){return this.request(`/shares/posts/${e}`,{method:"POST"})}async getShares(e,t={}){const s=new URLSearchParams(t).toString();return this.request(`/shares/posts/${e}${s?"?"+s:""}`)}async toggleSavePost(e){return this.request(`/saves/posts/${e}`,{method:"POST"})}async getSavedPosts(e={}){const t=new URLSearchParams(e).toString();return this.request(`/saves/posts${t?"?"+t:""}`)}async isPostSaved(e){return this.request(`/saves/posts/${e}/check`)}async getEvents(e={}){const t=new URLSearchParams(e).toString();return this.request(`/events${t?"?"+t:""}`)}async createEvent(e){return this.request("/events",{method:"POST",body:JSON.stringify(e)})}async updateEvent(e,t){return this.request(`/events/${e}`,{method:"PUT",body:JSON.stringify(t)})}async deleteEvent(e){return this.request(`/events/${e}`,{method:"DELETE"})}async getEvent(e){return this.request(`/events/${e}`)}async subscribeToEvent(e,t){return this.request(`/events/${e}/subscribe`,{method:"POST",body:JSON.stringify(t)})}async unsubscribeFromEvent(e){return this.request(`/events/${e}/subscribe`,{method:"DELETE"})}async getEventSubscriptions(e){return this.request(`/events/${e}/subscriptions`)}async healthCheck(){return this.request("/")}}const p=new d;export{p as a};
//# sourceMappingURL=apiService-D5WPn4Ml.js.map
