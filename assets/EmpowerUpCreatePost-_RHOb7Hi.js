import{c as U,r as a,j as e,i as C,X as te,B as ae}from"./index-DLqimMV8.js";import{C as re,a as oe}from"./card-CY9-ve7w.js";import{A as le,a as ie,b as ne}from"./index-EfjSmcDM.js";import{T as ce}from"./textarea-Dc95vB93.js";import{S as de,a as me,b as ue,c as xe,d as he}from"./select-d49l-vTK.js";import{I as ge}from"./input-FZRWGTRd.js";import{T as pe}from"./tag-6iqodST4.js";import{H as fe}from"./hash-CzDnjanY.js";import{V as be}from"./video-BK-m8ucD.js";import{C as ve}from"./chart-column-D_csKldJ.js";import{S as je}from"./index-BgaOpAAA.js";import{C as we}from"./calendar-BcaNxl4E.js";import{M as Ne}from"./map-pin-XNZDTA2K.js";import{S as ye}from"./send-COm1LQ5b.js";/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Ae=U("image",ke);/**
 * @license lucide-react v0.522.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Ce=U("upload",Ee),G=a.forwardRef(({className:l,variant:i,...m},u)=>e.jsx("div",{ref:u,role:"alert",className:C("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{"border-border text-foreground":i==="default","border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive":i==="destructive","border-emerald-200 bg-emerald-50 text-emerald-800 [&>svg]:text-emerald-500":i==="success","border-sky-200 bg-sky-50 text-sky-800 [&>svg]:text-sky-500":i==="info","border-amber-200 bg-amber-50 text-amber-800 [&>svg]:text-amber-500":i==="warning"},l),...m}));G.displayName="Alert";const V=a.forwardRef(({className:l,...i},m)=>e.jsx("div",{ref:m,className:C("text-sm [&_p]:leading-relaxed",l),...i}));V.displayName="AlertDescription";const q=a.forwardRef(({className:l,children:i,...m},u)=>e.jsx("h5",{ref:u,className:C("mb-1 font-medium leading-none tracking-tight",l),...m,children:i}));q.displayName="AlertTitle";const E=4,Se=10*1024*1024,Me=["image/jpeg","image/png","image/gif","image/webp"],Fe=["video/mp4","video/webm","video/mov"],Te=["Geral","Artesanato","CulinÃ¡ria","Moda","Beleza","Tecnologia","NegÃ³cios","SaÃºde","EducaÃ§Ã£o","Dicas","InspiraÃ§Ã£o","Eventos"],Oe=({user:l,onPostCreated:i,className:m="",groupId:u=null,placeholder:W})=>{const[x,S]=a.useState(""),[M,F]=a.useState("Geral"),[T,D]=a.useState(""),[p,v]=a.useState([]),[c,j]=a.useState([]),[$,P]=a.useState(!1),[w,B]=a.useState(!1),[O,N]=a.useState(!1),[h,I]=a.useState(null),_=a.useRef(null),d=a.useRef(null),f=a.useRef(null),g=a.useCallback((s,t="error")=>{I({type:t,message:s})},[]);a.useEffect(()=>{if(!h)return;f.current&&clearTimeout(f.current);const s=setTimeout(()=>{I(null)},h.type==="error"?6e3:4e3);return f.current=s,()=>clearTimeout(s)},[h]),a.useEffect(()=>()=>{f.current&&clearTimeout(f.current)},[]);const H=s=>{S(s.target.value),d.current&&(d.current.style.height="auto",d.current.style.height=d.current.scrollHeight+"px")},L=a.useCallback(s=>{if(s.size>Se)return"Arquivo muito grande. MÃ¡ximo 10MB.";const t=Me.includes(s.type),o=Fe.includes(s.type);return!t&&!o?"Tipo de arquivo nÃ£o suportado. Use imagens (JPG, PNG, GIF, WEBP) ou vÃ­deos (MP4, WEBM, MOV).":null},[]),y=a.useCallback(s=>{const t=Array.from(s);if(p.length+t.length>E){g(`MÃ¡ximo de ${E} arquivos permitidos por post.`,"error");return}const o=[];t.forEach(r=>{const n=L(r);if(n){g(n,"error");return}o.push(r);const R=new FileReader;R.onload=z=>{const ee={id:Date.now()+Math.random(),file:r,url:z.target.result,type:r.type.startsWith("image/")?"image":"video",name:r.name,size:r.size,data:z.target.result.split(",")[1]};j(se=>[...se,ee])},R.readAsDataURL(r)}),v(r=>[...r,...o])},[p,g,L]),X=s=>{const t=s.target.files;t&&t.length>0&&y(t),s.target.value=""},k=a.useCallback(s=>{s.preventDefault(),s.stopPropagation(),s.type==="dragenter"||s.type==="dragover"?N(!0):s.type==="dragleave"&&N(!1)},[]),Y=a.useCallback(s=>{s.preventDefault(),s.stopPropagation(),N(!1),s.dataTransfer.files&&s.dataTransfer.files[0]&&y(s.dataTransfer.files)},[y]),J=s=>{const t=c.findIndex(o=>o.id===s);t!==-1&&(j(o=>o.filter(r=>r.id!==s)),v(o=>o.filter((r,n)=>n!==t)))},K=async s=>{if(s.preventDefault(),!x.trim()&&c.length===0){g("Adicione conteÃºdo ou mÃ­dia ao seu post.","error"),d.current?.focus();return}if(!l?.id){g("VocÃª precisa estar logada para postar.","error");return}B(!0),P(!0);try{const o={...{conteudo:x.trim(),categoria:M,tags:T.split(",").map(n=>n.trim()).filter(n=>n.length>0)}};u&&(o.grupo_id=u,o.escopo_visibilidade="grupo");const r=p.length>0?p[0]:null;if(i){const n=await i(o,r);if(n&&n.success)S(""),F("Geral"),D(""),v([]),j([]),d.current&&(d.current.style.height="auto"),g("Post publicado com sucesso! ðŸŽ‰","success");else throw new Error(n?.message||"Erro ao publicar post")}else throw new Error("FunÃ§Ã£o de criaÃ§Ã£o de post nÃ£o definida")}catch(t){console.error("Erro ao postar:",t),g("Erro ao publicar post: "+(t.message||"tente novamente."),"error")}finally{B(!1),P(!1)}},b=280-x.length,A=b<0,Z=s=>{if(s===0)return"0 Bytes";const t=1024,o=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(s)/Math.log(t));return parseFloat((s/Math.pow(t,r)).toFixed(2))+" "+o[r]},Q=W||(u?"Compartilhe uma atualizaÃ§Ã£o exclusiva com o grupo.":"Compartilhe suas ideias e inspire outras empreendedoras! âœ¨");return e.jsx(re,{className:`w-full max-w-full shadow-sm border-sage/20 rounded-none sm:rounded-2xl ${m}`,children:e.jsx(oe,{className:"max-w-full p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-start sm:gap-0 sm:space-x-4",children:[e.jsxs(le,{className:"w-12 h-12 flex-shrink-0 border-2 border-coral/20",children:[e.jsx(ie,{src:l?.foto_perfil,alt:l?.nome}),e.jsx(ne,{className:"bg-coral text-white font-semibold",children:l?.nome?.charAt(0).toUpperCase()||"U"})]}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-800",children:l?.nome||"UsuÃ¡rio"}),e.jsxs("span",{className:"text-sm text-coral",children:["@",l?.username||"usuario"]})]}),h&&e.jsxs(G,{variant:h.type==="success"?"success":"destructive",children:[e.jsx(q,{children:h.type==="success"?"Tudo certo!":"AtenÃ§Ã£o"}),e.jsx(V,{children:h.message})]}),e.jsxs("div",{className:"relative",children:[e.jsx(ce,{ref:d,placeholder:Q,value:x,onChange:H,className:"min-h-[110px] resize-none border-sage/30 bg-cream/30 p-3 text-base leading-relaxed placeholder:text-gray-500 focus:border-coral focus:ring-2 focus:ring-coral/40 sm:min-h-[120px] sm:p-4 sm:text-lg",onDragEnter:k,onDragLeave:k,onDragOver:k,onDrop:Y}),O&&e.jsx("div",{className:"absolute inset-0 bg-sage/20 border-2 border-dashed border-coral rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ce,{className:"h-8 w-8 text-coral mx-auto mb-2"}),e.jsx("p",{className:"text-coral font-medium",children:"Solte os arquivos aqui"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 border-t border-sage/30 py-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs font-semibold text-olive sm:text-sm",children:[e.jsx(pe,{className:"h-4 w-4 text-coral"}),"Categoria"]}),e.jsxs(de,{value:M,onValueChange:F,children:[e.jsx(me,{className:"w-full border-sage/30 focus:ring-coral/50 focus:border-coral",children:e.jsx(ue,{placeholder:"Selecione uma categoria"})}),e.jsx(xe,{children:Te.map(s=>e.jsx(he,{value:s,className:"hover:bg-sage/20",children:s},s))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center gap-2 text-xs font-semibold text-olive sm:text-sm",children:[e.jsx(fe,{className:"h-4 w-4 text-coral"}),"Hashtags"]}),e.jsx(ge,{type:"text",placeholder:"#empreendedorismo, #inspiraÃ§Ã£o, #dicas",value:T,onChange:s=>D(s.target.value),className:"w-full border-sage/30 text-sm focus:border-coral focus:ring-coral/50 sm:text-base"}),e.jsx("p",{className:"text-[11px] text-gray-500 sm:text-xs",children:"Separe as hashtags com vÃ­rgulas"})]})]}),c.length>0&&e.jsx("div",{className:`grid gap-2 rounded-2xl overflow-hidden border ${c.length===1?"grid-cols-1":(c.length===2||c.length===3,"grid-cols-2")}`,children:c.map((s,t)=>e.jsxs("div",{className:`relative group ${c.length===3&&t===0?"row-span-2":""}`,children:[s.type==="image"?e.jsx("img",{src:s.url,alt:"Preview",className:"w-full h-full object-cover min-h-[200px] max-h-[400px]"}):e.jsxs("div",{className:"relative",children:[e.jsx("video",{src:s.url,className:"w-full h-full object-cover min-h-[200px] max-h-[400px]",controls:!0,preload:"metadata"}),e.jsxs("div",{className:"absolute top-2 left-2 bg-black/70 text-white px-2 py-1 rounded text-xs",children:[e.jsx(be,{className:"w-3 h-3 inline mr-1"}),Z(s.size)]})]}),e.jsx("button",{onClick:()=>J(s.id),className:"absolute top-2 right-2 bg-coral/80 hover:bg-coral text-white rounded-full p-1 opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-md",children:e.jsx(te,{className:"h-4 w-4"})}),$&&e.jsx("div",{className:"absolute inset-0 bg-sage/30 backdrop-blur-sm flex items-center justify-center",children:e.jsx("div",{className:"bg-white rounded-full p-3 shadow-lg",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-coral"})})})]},s.id))}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-3 border-t border-sage/30 pt-4",children:[e.jsxs("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>_.current?.click(),disabled:p.length>=E||w,className:"group flex h-9 w-9 items-center justify-center rounded-full transition-colors hover:bg-sage/20 disabled:cursor-not-allowed disabled:opacity-50 sm:h-10 sm:w-10",title:"Adicionar imagem ou vÃ­deo",children:e.jsx(Ae,{className:"h-4 w-4 text-coral group-hover:text-coral-dark sm:h-5 sm:w-5"})}),e.jsx("input",{ref:_,type:"file",multiple:!0,accept:"image/*,video/*",onChange:X,className:"hidden"}),e.jsx("button",{type:"button",className:"flex h-9 w-9 items-center justify-center rounded-full transition-colors hover:bg-sage/20 sm:h-10 sm:w-10",disabled:!0,title:"Adicionar enquete (em breve)",children:e.jsx(ve,{className:"h-4 w-4 text-olive sm:h-5 sm:w-5"})}),e.jsx("button",{type:"button",className:"flex h-9 w-9 items-center justify-center rounded-full transition-colors hover:bg-sage/20 sm:h-10 sm:w-10",disabled:!0,title:"Adicionar emoji (em breve)",children:e.jsx(je,{className:"h-4 w-4 text-olive sm:h-5 sm:w-5"})}),e.jsx("button",{type:"button",className:"flex h-9 w-9 items-center justify-center rounded-full transition-colors hover:bg-sage/20 sm:h-10 sm:w-10",disabled:!0,title:"Agendar post (em breve)",children:e.jsx(we,{className:"h-4 w-4 text-olive sm:h-5 sm:w-5"})}),e.jsx("button",{type:"button",className:"flex h-9 w-9 items-center justify-center rounded-full transition-colors hover:bg-sage/20 sm:h-10 sm:w-10",disabled:!0,title:"Adicionar localizaÃ§Ã£o (em breve)",children:e.jsx(Ne,{className:"h-4 w-4 text-olive sm:h-5 sm:w-5"})})]}),e.jsxs("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[x.length>0&&e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("div",{className:"relative h-7 w-7 sm:h-8 sm:w-8",children:[e.jsxs("svg",{className:"h-7 w-7 -rotate-90 sm:h-8 sm:w-8",viewBox:"0 0 36 36",children:[e.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:"#E5E7EB",strokeWidth:"2"}),e.jsx("path",{d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831",fill:"none",stroke:A?"#FF6B6B":b<=20?"#F59E0B":"#95E1D3",strokeWidth:"2",strokeDasharray:`${Math.min(100,x.length/280*100)}, 100`})]}),b<=20&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("span",{className:`text-[10px] font-bold ${A?"text-coral":"text-amber-500"} sm:text-xs`,children:b})})]})}),e.jsx(ae,{onClick:K,disabled:!x.trim()&&p.length===0||A||w,className:"rounded-full bg-coral px-4 py-2 text-sm font-semibold text-white transition-all duration-200 shadow-md hover:bg-coral-dark hover:shadow-lg disabled:bg-gray-300 disabled:shadow-none sm:px-8 sm:text-base",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-b-2 border-white"}),"Publicando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"mr-2 h-4 w-4 sm:h-5 sm:w-5"}),"Publicar"]})})]})]})]})]})})})};export{G as A,Oe as E,V as a};
//# sourceMappingURL=EmpowerUpCreatePost-_RHOb7Hi.js.map
